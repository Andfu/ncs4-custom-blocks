!function(){"use strict";var e={};function t(){return t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},t.apply(this,arguments)}e.n=function(t){var s=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(s,{a:s}),s},e.d=function(t,s){for(var a in s)e.o(s,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:s[a]})},e.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};var s=window.wp.element,a=window.wp.blocks,l=window.wp.blockEditor,n=window.React,i=e.n(n),r=window.wp.components;function o(e){return(0,s.createElement)(s.Fragment,null,e.useInlineSvg?(0,s.createElement)("div",{dangerouslySetInnerHTML:{__html:e.img.data}}):(0,s.createElement)("embed",{type:e.img.mime,src:e.img.url}))}const c=e=>({marginLeft:"left"==e.align?0:"auto",marginRight:"right"==e.align?0:"auto"});function p(e){return e.useInlineSvg=null==e.useInlineSvg||e.useInlineSvg,(0,s.createElement)(l.MediaUploadCheck,null,(0,s.createElement)(l.MediaUpload,{onSelect:e.onChange,value:e.img?e.img.id:null,allowedTypes:["image"],render:t=>{let{open:a}=t;return(0,s.createElement)(r.Button,{className:e.img?"editor-post-featured-image__preview":"editor-post-featured-image__toggle",onClick:a},e.img?"image/svg+xml"===e.img.mime&&e.img.data?(0,s.createElement)(o,{img:e.img,useInlineSvg:e.useInlineSvg,style:c(e)}):(0,s.createElement)("img",{src:e.img.url,style:c(e)}):"Choose an image")}}))}function u(e){let a=e.img&&"image/svg+xml"===e.img.mime&&e.img.data;return e.useInlineSvg=null==e.useInlineSvg||e.useInlineSvg,(0,s.createElement)(s.Fragment,null,a&&!e.useInlineSvg?(0,s.createElement)("embed",{type:e.img.mine,src:e.img.url}):(0,s.createElement)("div",t({},e,a?{dangerouslySetInnerHTML:{__html:e.img.data,style:c(e)}}:{}),e.img&&!a?(0,s.createElement)("img",{src:e.img.url,style:c(e)}):null))}function m(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class h extends i().Component{getChoices(e){let t=[];return e.forEach(((e,s)=>{t[s]={attribute:e.attribute,value:e.value||e.default}})),t}getChoice(e,t){for(let s of t)if(s.attribute===e)return s}render(){let e=this.props.maxRadioOptions||5,t=this.props.options,a=this.props.onChange,l=this.getChoices(t),n=[...Array(t.length).keys()].map((n=>(0,s.createElement)(d,{key:n,maxRadioOptions:e,label:t[n].label,help:t[n].help,choices:t[n].choices,multiple:t[n].multiple,invertValue:t[n].invertValue,min:t[n].min,max:t[n].max,step:t[n].step,markStep:t[n].markStep,markRender:t[n].markRender,tooltipRender:t[n].tooltipRender,value:this.getChoice(t[n].attribute,l).value,disabled:t[n].disabled,callback:e=>{"function"==typeof t[n].onChange&&(e=t[n].onChange(e)),a({[t[n].attribute]:e})}})));return(0,s.createElement)(s.Fragment,null,n)}}class d extends i().Component{render(){let e=this.props.maxRadioOptions,t=this.props.value,a=this.props.label,l=this.props.help,n=this.props.choices,i=this.props.min,o=this.props.max,c=this.props.step,p=this.props.markStep,u=this.props.markRender,m=this.props.tooltipRender,h=this.props.multiple,d=this.props.invertValue||!1,x=this.props.disabled,f=this.props.callback;return(0,s.createElement)(s.Fragment,null,Array.isArray(t)?(0,s.createElement)(g,this.props):n?h?(0,s.createElement)(b,{label:a,help:l,options:n,value:t,callback:f,disabled:x}):n.length<=e?(0,s.createElement)(r.RadioControl,{label:a,help:l,selected:t,onChange:f,options:n,disabled:x}):(0,s.createElement)(r.SelectControl,{label:a,help:l,value:t,onChange:f,options:n,disabled:x}):isNaN(i)||isNaN(o)||isNaN(c)?(0,s.createElement)(r.ToggleControl,{label:a,help:l,checked:d!=Boolean(t),onChange:e=>f(d!=e),disabled:x}):(0,s.createElement)(v,{label:a,help:l,value:t,min:i,max:o,step:c,markStep:p,markRender:u,tooltipRender:m,disabled:x,callback:f}))}}class g extends i().Component{getProps(e,t){var s={...e};for(let[e,a]of Object.entries(s))Array.isArray(a)&&(s[e]=a[t]);return s}render(){let e=this.props.value,a=this.props.callback,l=[...Array(e.length).keys()].map((l=>(0,s.createElement)(d,t({},this.getProps(this.props,l),{key:l,callback:t=>{let s=[...e];s[l]=t,a(s)}}))));return(0,s.createElement)(s.Fragment,null,l)}}class b extends i().Component{constructor(e){super(e),this.id="ncs4-components-checkboxgroup-"+String(document.getElementsByClassName("ncs4-components-checkboxgroup").length)}render(){let e=this.props.label,t=this.props.help,a=this.props.value,l=this.props.options,n=this.props.disabled,i=this.props.callback,o=[...Array(l.length).keys()].map((e=>(0,s.createElement)(r.CheckboxControl,{key:e,label:l[e].label,checked:a.includes(l[e].value),disabled:n,name:this.id,onChange:t=>{var s=[...a];if(t)s.push(l[e].value);else{let t=s.indexOf(l[e].value);t>-1&&s.splice(t,1)}i(s)}})));return(0,s.createElement)("div",{className:"ncs4-components-checkboxgroup"},(0,s.createElement)("label",{className:"components-base-control__label css-pezhm9-StyledLabel e1puf3u2",for:this.id},e),(0,s.createElement)("p",{className:"components-base-control__help css-1gbp77-StyledHelp e1puf3u3"},t),o)}}class v extends i().Component{createMarks(e,t,s,a){var l=Array(Math.floor((t-e)/s)+1);for(let t=0;t<l.length;t++)l[t]={value:e,label:a(e)},e+=s;return l}render(){let e=this.props.label,t=this.props.help,a=this.props.value,l=this.props.min,n=this.props.max,i=this.props.step||1,o=this.props.markStep||i,c=this.props.markRender||(e=>String(e)),p=this.props.disabled,u=this.props.tooltipRender||c,m=this.props.callback;return(0,s.createElement)(r.RangeControl,{label:e,help:t,value:a,min:l,max:n,step:i,marks:this.createMarks(l,n,o,c),renderTooltipContent:u,disabled:p,onChange:m})}}class x extends i().Component{clamp(e,t,s){return Math.min(Math.max(e,t),s)}getUnitSettings(e){for(let t of e.units)if(t.value===e.value)return t}render(){let e=this.props.label,a=this.props.help,l=this.props.disabled,n=this.props.onChange,i=this.props.toggleSelector,o=this.props.unitSelector,c=this.props.slider,p=i&&i.attribute,u=!i||i.value||i.default,m=o.value||o.default,h=isNaN(c.value)?c.default:c.value;(i&&void 0===i.value||void 0===o.value||isNaN(c.value))&&n({[p]:u,unit:m,value:h,asString:String(h)+m});let g=this.getUnitSettings(o);return(0,s.createElement)(s.Fragment,null,e&&(0,s.createElement)("p",{className:"components-base-control__label css-pezhm9-StyledLabel e1puf3u2"},e),(0,s.createElement)(r.PanelRow,null,p&&(0,s.createElement)(d,t({},i,{value:u,callback:e=>n({[p]:e,unit:m,value:h,asString:String(h)+m})})),(0,s.createElement)(d,t({},o,{multiple:!1,choices:o.units,disabled:l||!u,callback:e=>{let t={...o,value:e},s=this.getUnitSettings(t);n({[p]:u,unit:e,value:this.clamp(h,s.min,s.max),asString:this.clamp(h,s.min,s.max)+e})}}))),(0,s.createElement)(v,t({},c,{value:h,min:g.min,max:g.max,step:g.step,markStep:g.markStep||g.step,tooltipRender:e=>String(e)+(g.label||g.value),disabled:l||!u,callback:e=>n({[p]:u,unit:m,value:this.clamp(e,g.min,g.max),asString:this.clamp(e,g.min,g.max)+m})})),a&&(0,s.createElement)("p",{className:"components-base-control__help css-1gbp77-StyledHelp e1puf3u3"},a))}}class f extends i().Component{validateNumber(e){return!Boolean(e)||f.reg.test(e)}render(){let e=this.validateNumber(this.props.value);return(0,s.createElement)(r.TextControl,{value:this.props.value,onChange:e=>{this.props.onChange(e)},label:"Phone",help:e?null:"Unrecognized phone number format (perhaps you've made a typo?)"})}}m(f,"reg",/^(\+?[0-9]{1,4})?[ \-.]*[0-9]{3}[ \-.]*[0-9]{3}[ \-.]*[0-9]{4}$/);class C extends i().Component{validateEmail(e){return!Boolean(e)||C.reg.test(e)}render(){let e=this.validateEmail(this.props.value);return(0,s.createElement)(r.TextControl,{value:this.props.value,onChange:e=>{this.props.onChange(e),this.validateEmail(e)&&this.props.onChangeComplete(e)},label:"Email",help:e?null:"Invalid email address"})}}m(C,"reg",/^(?:[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-zA-Z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/);var E=window.wp.data;class k extends i().Component{render(){let e=this.props.label,t=(this.props.allowGradients,this.props.value),a=this.props.onChange,l=(0,E.select)("core/block-editor").getSettings();return(0,s.createElement)(s.Fragment,null,(0,s.createElement)("p",null,e),(0,s.createElement)(r.ColorPalette,{colors:l.colors,disableCustomColors:l.disableCustomColors,value:t,onChange:e=>{let t=l.colors.filter((t=>t.color===e))[0];a({color:e,slug:t?t.slug:null})}}))}}function S(e){let t=(0,E.select)("core/block-editor").getSettings().colors;return function(e,t){let s=t.filter((t=>t.slug===e))[0];return s?s.color:null}(e.slug,t)}class y extends i().Component{render(){let e=this.props.blockProps,a=this.props.attributes;return(0,s.createElement)("div",t({},e,{className:["ncs4-icon-block",e.className].join(" "),style:{"--image-size":a.size.asString,"--dashicons-color":a.dashiconColor.color},dashicon:a.dashicon}),a.useDashicons?(0,s.createElement)("span",{className:"dashicons dashicons-"+a.dashicon}):(0,s.createElement)(u,{img:a.img}))}}let w=[{value:"px",label:"px",min:16,max:64,step:8,markStep:16},{value:"em",label:"em",min:.5,max:3,step:.5}];class A extends i().Component{constructor(e){super(e),this.attributes=e.attributes,this.setAttributes=e.setAttributes,this.setStateAttributes=this.setStateAttributes.bind(this),this.state={...this.attributes,useDashicons:Boolean(this.attributes.useDashicons)}}componentDidMount(){this.setStateAttributes({dashiconColor:{color:S(this.state.dashiconColor),slug:this.state.dashiconColor.slug}})}setStateAttributes(e){this.setState(e,(()=>{this.setAttributes(e)}))}render(){return(0,s.createElement)(s.Fragment,null,(0,s.createElement)(y,{attributes:this.state,blockProps:this.props.blockProps}),(0,s.createElement)(l.InspectorControls,null,(0,s.createElement)(r.PanelBody,{title:"Icon settings",initialOpen:!0},(0,s.createElement)(r.CheckboxControl,{checked:this.state.useDashicons,label:"Use Dashicon icon",help:this.state.useDashicons?"A Dashicon will be used for the icon":"An image file will be used for the icon",onChange:e=>this.setStateAttributes({useDashicons:e})}),(0,s.createElement)(r.TextControl,{value:this.state.dashicon,label:"Dashicon",help:"Input a dashicon name (not including 'dashicons-'). Read more at https://developer.wordpress.org/resource/dashicons",disabled:!this.state.useDashicons,onChange:e=>this.setStateAttributes({dashicon:e})}),(0,s.createElement)(k,{label:"Dashicon color",value:this.state.dashiconColor.color,onChange:e=>{this.setStateAttributes({dashiconColor:e})}}),this.state.useDashicons&&(0,s.createElement)("div",{style:{position:"relative",marginBottom:"16px"}},(0,s.createElement)("p",{style:{color:"red",position:"absolute",width:"100%",height:"100%",margin:0,display:"grid",alignItems:"center",justifyItems:"center",zIndex:-1}},"Invalid Dashicon"),(0,s.createElement)("span",{className:"dashicons dashicons-"+this.state.dashicon,style:{fontSize:"128px",padding:0,margin:0,width:"100%",height:"auto",backgroundColor:"white"}})),(0,s.createElement)(p,{onChange:e=>function(e,t){arguments.length>2&&void 0!==arguments[2]&&!arguments[2]||"image/svg+xml"!==e.mime?t(e):fetch(e.url).then((e=>e.text())).then((s=>{e.data=s,t(e)}))}(e,(e=>this.setStateAttributes({img:e}))),img:this.state.img,disabled:this.state.useDashicons}),(0,s.createElement)(x,{label:"Image size",unitSelector:{label:"Units",value:this.state.size.unit,units:w},slider:{value:this.state.size.value},onChange:e=>{this.setStateAttributes({size:e})}}),(0,s.createElement)(h,{options:[{attribute:"margin",label:["Margin Top (em)","Margin Right (em)","Margin Bottom (em)","Margin Left (em)"],value:this.state.margin,min:0,max:3,step:.5,toolTipRender:e=>String(e)+"em"}],onChange:this.setStateAttributes}))))}}(0,a.registerBlockType)("ncs4-custom-blocks/icon",{apiVersion:2,title:"Icon",icon:"format-image",category:"media",attributes:{useDashicons:{type:"boolean",default:"false"},dashicon:{type:"string",source:"attribute",selector:".ncs4-icon-block",attribute:"dashicon"},dashiconColor:{type:"object",default:{color:null,slug:null}},img:{type:"object"},size:{type:"object",default:{value:16,unit:"px",asString:"16px"}},margin:{type:"array",default:[0,1,0,1]}},edit:e=>(0,s.createElement)(A,t({},e,{blockProps:(0,l.useBlockProps)()})),save:e=>(0,s.createElement)(y,t({},e,{blockProps:l.useBlockProps.save()}))})}();