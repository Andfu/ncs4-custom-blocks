{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///../node_modules/@babel/runtime/helpers/extends.js","webpack:///./src/edit.js","webpack:///./src/index.js","webpack:///./src/save.js","webpack:///external [\"wp\",\"blockEditor\"]","webpack:///external [\"wp\",\"blocks\"]","webpack:///external [\"wp\",\"components\"]","webpack:///external [\"wp\",\"data\"]","webpack:///external [\"wp\",\"element\"]","webpack:///external \"React\""],"names":["BPTopicEdit","React","Component","constructor","props","attributes","blockProps","clientId","setAttributes","setStateAttributes","bind","handleSelected","onTitleChange","onLinkChange","onImageChange","onSvgChange","state","editMode","title","link","img","svg","wp","data","subscribe","createClassName","classes","join","attrs","setState","selectedBlock","select","getSelectedBlock","v","render","BPTopicEditMode","titleChange","linkChange","imageChange","updateSvg","mime","url","fetch","then","res","text","id","open","Svg","__html","registerBlockType","apiVersion","icon","category","type","edit","useBlockProps","save","BPTopicSave","className","TopicTextArea","TopicIconArea","renderSvg","dangerouslySetInnerHTML"],"mappings":"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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.js\");\n","function _extends() {\n  module.exports = _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n  return _extends.apply(this, arguments);\n}\n\nmodule.exports = _extends;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","import React from 'react';\r\nimport { BPTopicSave } from './save.js';\r\n\r\nimport { select } from '@wordpress/data';\r\nimport { MediaUploadCheck, MediaUpload } from '@wordpress/block-editor';\r\nimport { TextControl, Button } from '@wordpress/components';\r\n\r\n\r\nexport class BPTopicEdit extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.attributes = props.attributes;\r\n    this.blockProps = props.blockProps;\r\n    this.clientId = props.clientId;\r\n    this.setAttributes = props.setAttributes;\r\n\r\n    this.setStateAttributes = this.setStateAttributes.bind(this);\r\n    this.handleSelected = this.handleSelected.bind(this);\r\n    this.onTitleChange = this.onTitleChange.bind(this);\r\n    this.onLinkChange = this.onLinkChange.bind(this);\r\n    this.onImageChange = this.onImageChange.bind(this);\r\n    this.onSvgChange = this.onSvgChange.bind(this);\r\n\r\n    this.state = {\r\n      editMode: false,\r\n      title: props.attributes.title,\r\n      link: props.attributes.link,\r\n      img: props.attributes.img,\r\n      svg: props.attributes.svg,\r\n    }\r\n\r\n    wp.data.subscribe(this.handleSelected);\r\n  }\r\n\r\n  createClassName(classes) {\r\n    return [\r\n      'ncs4-bp-topic',\r\n    ].join(' ') + ' ' + classes;\r\n  }\r\n\r\n  setStateAttributes(attrs) {\r\n    this.setState(\r\n      attrs,\r\n      () => { this.setAttributes( attrs ) }\r\n    );\r\n  }\r\n\r\n  handleSelected() {\r\n    let selectedBlock =\r\n       select(\"core/block-editor\")\r\n      .getSelectedBlock()\r\n    ;\r\n    if (!selectedBlock) { return }\r\n\r\n    if ( !this.state.editMode && selectedBlock.clientId === this.clientId ) {\r\n      this.setState( { editMode: true } );\r\n    } else if ( this.state.editMode && selectedBlock.clientId !== this.clientId ) {\r\n      this.setState( { editMode: false } );\r\n    }\r\n  }\r\n\r\n  onTitleChange(v) {\r\n    this.setStateAttributes({ title: v });\r\n  }\r\n\r\n  onLinkChange(v) {\r\n    this.setStateAttributes({ link: v });\r\n  }\r\n\r\n  onImageChange(v) {\r\n    this.setStateAttributes({ img: v });\r\n  }\r\n\r\n  onSvgChange(v) {\r\n    this.setStateAttributes({ svg: v });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className = \"ncs4-bp-topic__wrapper\" { ...this.blockProps }>\r\n        { this.state.editMode\r\n          ?\r\n            <BPTopicEditMode\r\n              state = { this.state }\r\n              onTitleChange = { this.onTitleChange }\r\n              onLinkChange = { this.onLinkChange }\r\n              onImageChange = { this.onImageChange }\r\n              onSvgChange = { this.onSvgChange }\r\n            />\r\n          :\r\n            <BPTopicSave\r\n              attributes = { this.state }\r\n              blockProps = { this.blockProps }\r\n            />\r\n        }\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nclass BPTopicEditMode extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.onTitleChange = props.onTitleChange;\r\n    this.onLinkChange = props.onLinkChange;\r\n    this.onImageChange = props.onImageChange;\r\n    this.onSvgChange = props.onSvgChange;\r\n\r\n    this.titleChange = this.titleChange.bind(this);\r\n    this.linkChange = this.linkChange.bind(this);\r\n    this.imageChange = this.imageChange.bind(this);\r\n    this.updateSvg = this.updateSvg.bind(this);\r\n\r\n    this.state = props.state;\r\n  }\r\n\r\n\r\n  titleChange(v) {\r\n    this.setState( {title: v} );\r\n    this.onTitleChange(v);\r\n  }\r\n\r\n  linkChange(v) {\r\n    this.setState( {link: v} );\r\n    this.onLinkChange(v);\r\n  }\r\n\r\n  imageChange(v) {\r\n    this.setState( {img: v} );\r\n    this.onImageChange(v);\r\n    if (v.mime === \"image/svg+xml\") {\r\n      this.updateSvg(v.url);\r\n    }\r\n  }\r\n\r\n  updateSvg(url) {\r\n    fetch(url)\r\n      .then(res => res.text())\r\n      .then(text => {\r\n        this.setState( { svg: text } );\r\n        this.onSvgChange(text);\r\n      }\r\n    );\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <>\r\n        <TextControl\r\n          label = \"Topic\"\r\n          placeholder = \"Best Practices Topic\"\r\n          value = { this.state.title }\r\n          onChange = { this.titleChange }\r\n        />\r\n        <TextControl\r\n          label = \"Topic page link\"\r\n          help = \"Link to the topic page\"\r\n          placeholder = \"/resources/best-practices/my-topic\"\r\n          value = { this.state.link }\r\n          onChange = { this.linkChange }\r\n        />\r\n        <MediaUploadCheck>\r\n          <MediaUpload\r\n            onSelect = { this.imageChange }\r\n            value = { this.state.img ? this.state.img.id : null}\r\n            allowedTypes = { ['image'] }\r\n            render = { ( { open } ) => (\r\n              <Button\r\n                className = {\r\n                  this.state.img\r\n                    ? 'editor-post-featured-image__preview'\r\n                    : 'editor-post-featured-image__toggle'\r\n                }\r\n                onClick = { open }\r\n              >\r\n                { this.state.img\r\n                  ? (this.state.img.mime === \"image/svg+xml\"\r\n                      ? <Svg\r\n                          svg = { this.state.svg }\r\n                        />\r\n                      : <img src = { this.state.img.url }/>\r\n                    )\r\n                  : \"Choose an image\"\r\n                }\r\n              </Button>\r\n            )}\r\n          />\r\n        </MediaUploadCheck>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nclass Svg extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.data = props.svg;\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div\r\n        dangerouslySetInnerHTML = {{\r\n          __html: this.data\r\n        }}\r\n      />\r\n    );\r\n  }\r\n}\r\n","import { registerBlockType } from '@wordpress/blocks';\r\nimport { useBlockProps } from '@wordpress/block-editor';\r\n\r\nimport { BPTopicEdit } from './edit.js';\r\nimport { BPTopicSave } from './save.js';\r\n\r\nregisterBlockType( 'ncs4-custom-blocks/bp-topic', {\r\n  apiVersion: 2,\r\n\r\n  title: 'Best Practices Topic',\r\n  icon: 'links',\r\n  category: 'layout',\r\n  attributes: {\r\n    title: {\r\n      type: 'string',\r\n    },\r\n    link: {\r\n      type: 'string',\r\n    },\r\n    img: {\r\n      type: 'object',\r\n    },\r\n    svg: {\r\n      type: 'string',\r\n    },\r\n  },\r\n\r\n  edit: (props) => (\r\n    <BPTopicEdit\r\n      { ...props }\r\n      blockProps = { useBlockProps() }\r\n    />\r\n  ),\r\n  save: (props) => (\r\n    <BPTopicSave\r\n      { ...props }\r\n      blockProps = { useBlockProps.save() }\r\n    />\r\n  ),\r\n});\r\n","import React from 'react';\r\n\r\nexport class BPTopicSave extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.attributes = props.attributes;\r\n    this.blockProps = props.blockProps;\r\n  }\r\n\r\n  createClassName(classes) {\r\n    return [\r\n      'ncs4-bp-topic',\r\n    ].join(' ') + ' ' + classes;\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <a { ...this.blockProps }\r\n        className = { this.createClassName(this.blockProps.className) }\r\n        href = { this.attributes.link }\r\n      >\r\n        <TopicTextArea text = { this.attributes.title }/>\r\n        <TopicIconArea\r\n          img = { this.attributes.img }\r\n          svg = { this.attributes.svg }\r\n        />\r\n        <div className = \"ncs4-bp-topic__overlay\"/>\r\n      </a>\r\n    );\r\n  }\r\n}\r\n\r\nclass TopicTextArea extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.text = props.text;\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className = \"ncs4-bp-topic__text-area\">\r\n        <p>{ this.text }</p>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nclass TopicIconArea extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.img = props.img;\r\n    this.svg = props.svg;\r\n  }\r\n\r\n  render() {\r\n    let renderSvg = this.img && this.img.mime === \"image/svg+xml\" && this.svg;\r\n    return (\r\n      <div\r\n        className = \"ncs4-bp-topic__icon-area\"\r\n        { ...(\r\n          renderSvg\r\n            ? {dangerouslySetInnerHTML: {\r\n              __html: this.svg\r\n            }}\r\n            : {}\r\n          )\r\n        }\r\n      >\r\n        {this.img && !renderSvg\r\n          ? <img src = { this.img.url } />\r\n          : null\r\n        }\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","(function() { module.exports = window[\"wp\"][\"blockEditor\"]; }());","(function() { module.exports = window[\"wp\"][\"blocks\"]; }());","(function() { module.exports = window[\"wp\"][\"components\"]; }());","(function() { module.exports = window[\"wp\"][\"data\"]; }());","(function() { module.exports = window[\"wp\"][\"element\"]; }());","(function() { module.exports = window[\"React\"]; }());"],"sourceRoot":""}