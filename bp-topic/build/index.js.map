{"version":3,"file":"index.js","mappings":"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","sources":["webpack://bp-topic/./src/edit.js","webpack://bp-topic/./src/save.js","webpack://bp-topic/../js/ImageControl.js","webpack://bp-topic/external window \"React\"","webpack://bp-topic/external window [\"wp\",\"blockEditor\"]","webpack://bp-topic/external window [\"wp\",\"blocks\"]","webpack://bp-topic/external window [\"wp\",\"components\"]","webpack://bp-topic/external window [\"wp\",\"data\"]","webpack://bp-topic/external window [\"wp\",\"element\"]","webpack://bp-topic/../node_modules/@babel/runtime/helpers/esm/extends.js","webpack://bp-topic/webpack/bootstrap","webpack://bp-topic/webpack/runtime/compat get default export","webpack://bp-topic/webpack/runtime/define property getters","webpack://bp-topic/webpack/runtime/hasOwnProperty shorthand","webpack://bp-topic/webpack/runtime/make namespace object","webpack://bp-topic/./src/index.js"],"sourcesContent":["import React from 'react';\r\nimport { BPTopicSave } from './save.js';\r\n\r\nimport { select } from '@wordpress/data';\r\nimport { MediaUploadCheck, MediaUpload } from '@wordpress/block-editor';\r\nimport { TextControl, Button } from '@wordpress/components';\r\n\r\nimport { ImageEdit, onImageChange } from '../../js/ImageControl.js';\r\n\r\n\r\nexport class BPTopicEdit extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.attributes = props.attributes;\r\n    this.clientId = props.clientId;\r\n    this.setAttributes = props.setAttributes;\r\n\r\n    this.setStateAttributes = this.setStateAttributes.bind(this);\r\n    this.handleSelected = this.handleSelected.bind(this);\r\n\r\n    this.state = {\r\n      editMode: false,\r\n      title: props.attributes.title,\r\n      link: props.attributes.link,\r\n      img: props.attributes.img,\r\n    }\r\n\r\n    wp.data.subscribe(this.handleSelected);\r\n  }\r\n\r\n  createClassName(classes) {\r\n    return [\r\n      'ncs4-bp-topic',\r\n    ].join(' ') + ' ' + classes;\r\n  }\r\n\r\n  setStateAttributes(attrs) {\r\n    this.setState(\r\n      attrs,\r\n      () => { this.setAttributes( attrs ) }\r\n    );\r\n  }\r\n\r\n  handleSelected() {\r\n    let selectedBlock =\r\n       select(\"core/block-editor\")\r\n      .getSelectedBlock()\r\n    ;\r\n    if (!selectedBlock) { return }\r\n\r\n    if ( !this.state.editMode && selectedBlock.clientId === this.clientId ) {\r\n      this.setState( { editMode: true } );\r\n    } else if ( this.state.editMode && selectedBlock.clientId !== this.clientId ) {\r\n      this.setState( { editMode: false } );\r\n    }\r\n  }\r\n\r\n  render() {\r\n    let blockProps = this.props.blockProps;\r\n\r\n    return (\r\n      <div className = \"ncs4-bp-topic__wrapper\" { ...blockProps }>\r\n        { this.state.editMode\r\n          ?\r\n            <BPTopicEditMode\r\n              attributes = { this.state }\r\n              onChange = { this.setStateAttributes }\r\n            />\r\n          :\r\n            <BPTopicSave\r\n              attributes = { this.state }\r\n              blockProps = { blockProps }\r\n            />\r\n        }\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nclass BPTopicEditMode extends React.Component {\r\n\r\n  render() {\r\n    let attrs = this.props.attributes;\r\n    let onChange = this.props.onChange;\r\n\r\n    return (\r\n      <>\r\n        <TextControl\r\n          label = \"Topic\"\r\n          placeholder = \"Best Practices Topic\"\r\n          value = { attrs.title }\r\n          onChange = { v => onChange({ title: v }) }\r\n        />\r\n        <TextControl\r\n          label = \"Topic page link\"\r\n          help = \"Link to the topic page\"\r\n          placeholder = \"/resources/best-practices/my-topic\"\r\n          value = { attrs.link }\r\n          onChange = { v => onChange({ link: v }) }\r\n        />\r\n        <ImageEdit\r\n          onChange = { (img) => onImageChange(img, v => onChange({ img: v })) }\r\n          img = { attrs.img }\r\n        />\r\n      </>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\n\r\nimport { ImageSave } from '../../js/ImageControl.js';\r\n\r\nexport class BPTopicSave extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.attributes = props.attributes;\r\n  }\r\n\r\n  createClassName(classes) {\r\n    return [\r\n      'ncs4-bp-topic',\r\n    ].join(' ') + ' ' + classes;\r\n  }\r\n\r\n  render() {\r\n    let blockProps = this.props.blockProps;\r\n\r\n    return (\r\n      <a { ...blockProps }\r\n        className = { this.createClassName(blockProps.className) }\r\n        href = { this.attributes.link }\r\n      >\r\n        <TopicTextArea text = { this.attributes.title }/>\r\n        <TopicIconArea\r\n          img = { this.attributes.img }\r\n          svg = { this.attributes.svg }\r\n        />\r\n        <div className = \"ncs4-bp-topic__overlay\"/>\r\n      </a>\r\n    );\r\n  }\r\n}\r\n\r\nclass TopicTextArea extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.text = props.text;\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className = \"ncs4-bp-topic__text-area\">\r\n        <p>{ this.text }</p>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nclass TopicIconArea extends React.Component {\r\n\r\n  render() {\r\n    let renderSvg = this.img && this.img.mime === \"image/svg+xml\" && this.svg;\r\n    let img = this.props.img || {};\r\n    return (\r\n      <ImageSave\r\n        className = \"ncs4-bp-topic__icon-area\"\r\n        img = { img }\r\n      />\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\nimport { MediaUploadCheck, MediaUpload } from '@wordpress/block-editor';\nimport { Button } from '@wordpress/components';\n\nexport const imageAttribute = (selector) => ({\n  type: \"image\",\n  source: \"query\",\n  selector,\n  default: [],\n  query: {\n    url: {\n      type: \"string\",\n      source: \"attribute\",\n      attribute: \"src\",\n    },\n    alt: {\n      type: \"string\",\n      source: \"attribute\",\n      attribute: \"alt\",\n      default: \"\",\n    },\n    mime: {\n      type: \"string\",\n      source: \"attribute\",\n      attribute: \"type\",\n    },\n    width: {\n      type: \"int\",\n      source: \"attribute\",\n      attribute: \"width\",\n      default: null,\n    },\n    height: {\n      type: \"int\",\n      source: \"attribute\",\n      attribute: \"height\",\n      default: null,\n    },\n  }\n});\n\n// Be careful that you only use trusted SVGs as they are not secure!\nexport function Svg(props) {\n  return <>\n    { props.useInlineSvg\n      ? <div\n          dangerouslySetInnerHTML = {{\n            __html: props.img.data\n          }}\n        />\n      : <embed\n          type = { props.img.mime }\n          src = { props.img.url }\n        />\n    }\n  </>\n}\n\n// Image object format:\n/*\nimg: {\n  mime = \"image/svg+xml\",\n  url = \"...\"\n  data = {svg data}\n  ...\n}\nBasically, it's WP's image object + svg data (if applicable)\nstored in a \"data\" attribute\n*/\n\nconst imageStyle = (props) => ({\n  marginLeft: (props.align == \"left\") ? 0 : \"auto\",\n  marginRight: (props.align == \"right\") ? 0 : \"auto\",\n})\n\n// Edit-side image display\nexport function ImageEdit(props) {\n  props.useInlineSvg = props.useInlineSvg == null ? true : props.useInlineSvg;\n\n  const onSelect = (media) => {\n    let img = {\n      url: media.url,\n      mime: media.mime,\n      inline: media.mime === \"image/svg+xml\" && props.useInlineSvg\n        ? true\n        : undefined,\n      width: media.width,\n      height: media.height,\n    }\n    props.onChange(img);\n  }\n\n  const noImage = !props.img\n    || (typeof props.img == \"object\" && Object.keys(props.img).length == 0);\n\n  return (\n    <MediaUploadCheck>\n      <MediaUpload\n        onSelect = { onSelect }\n        value = { props.img ? props.img.id : null }\n        allowedTypes = { ['image'] }\n        render = { ( {open} ) => (\n          <Button\n            className = {\n              noImage\n                ? 'editor-post-featured-image__toggle'\n                : 'editor-post-featured-image__preview'\n            }\n            style = {{\n              marginBottom: \"24px\",\n            }}\n            onClick = { open }\n          >\n            { noImage\n              ? \"Choose an image\"\n              : (props.img.mime === \"image/svg+xml\" && props.img.data\n                  ? <Svg\n                      img = { props.img }\n                      useInlineSvg = { props.useInlineSvg }\n                      style = { imageStyle(props) }\n                    />\n                  : <img\n                      src = { props.img.url }\n                      style = { imageStyle(props) }\n                    />\n                )\n            }\n          </Button>\n        )}\n      />\n    </MediaUploadCheck>\n  );\n}\n\n// Front-end image display\nexport function ImageSave(props) {\n  let isSvg = props.img && props.img.mime === \"image/svg+xml\";\n\n  return <>\n    { isSvg && !props.img.inline\n      ? <embed\n          className = \"component-image\"\n          type = { props.img.mime }\n          src = { props.img.url }\n        />\n      : <div {...props}\n        className = {\n          [\n            props.className,\n            \"component-image\",\n          ].join(' ')\n        }\n        type = { props.img.mime }\n        src = { props.img.url }\n        { ...(\n          isSvg\n            ? { dangerouslySetInnerHTML: {\n              __html: props.img.data,\n              style: imageStyle(props),\n            }}\n            : {}\n          )\n        }\n      >\n        { props.img && !isSvg\n          ? <img\n              className = \"component-image\"\n              type = { props.img.mime }\n              src = { props.img.url }\n              style = { imageStyle(props) }\n              width = { props.img.width }\n              height = { props.img.height }\n            />\n          : null\n        }\n      </div>\n    }\n  </>;\n}\n\n// Generic image change handler\nexport function onImageChange(img, callback, embedSvg = true) {\n  if (embedSvg && img.mime === \"image/svg+xml\") {\n    fetch(img.url)\n      .then(res => res.text())\n      .then(text => {\n        img.data = text;\n        callback(img);\n      });\n  } else {\n    callback(img);\n  }\n}\n","module.exports = window[\"React\"];","module.exports = window[\"wp\"][\"blockEditor\"];","module.exports = window[\"wp\"][\"blocks\"];","module.exports = window[\"wp\"][\"components\"];","module.exports = window[\"wp\"][\"data\"];","module.exports = window[\"wp\"][\"element\"];","export default function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { registerBlockType } from '@wordpress/blocks';\r\nimport { useBlockProps } from '@wordpress/block-editor';\r\n\r\nimport { BPTopicEdit } from './edit.js';\r\nimport { BPTopicSave } from './save.js';\r\n\r\nregisterBlockType( 'ncs4-custom-blocks/bp-topic', {\r\n  apiVersion: 2,\r\n\r\n  title: 'Best Practices Topic',\r\n  icon: 'links',\r\n  category: 'layout',\r\n  attributes: {\r\n    title: {\r\n      type: 'string',\r\n    },\r\n    link: {\r\n      type: 'string',\r\n    },\r\n    img: {\r\n      type: 'object',\r\n    },\r\n    svg: {\r\n      type: 'string',\r\n    },\r\n  },\r\n\r\n  edit: (props) => (\r\n    <BPTopicEdit\r\n      { ...props }\r\n      blockProps = { useBlockProps() }\r\n    />\r\n  ),\r\n  save: (props) => (\r\n    <BPTopicSave\r\n      { ...props }\r\n      blockProps = { useBlockProps.save() }\r\n    />\r\n  ),\r\n});\r\n"],"names":["React","BPTopicSave","select","MediaUploadCheck","MediaUpload","TextControl","Button","ImageEdit","onImageChange","BPTopicEdit","Component","constructor","props","attributes","clientId","setAttributes","setStateAttributes","bind","handleSelected","state","editMode","title","link","img","wp","data","subscribe","createClassName","classes","join","attrs","setState","selectedBlock","getSelectedBlock","render","blockProps","BPTopicEditMode","onChange","v","ImageSave","className","svg","TopicTextArea","text","TopicIconArea","renderSvg","mime","imageAttribute","selector","type","source","default","query","url","attribute","alt","width","height","Svg","useInlineSvg","__html","imageStyle","marginLeft","align","marginRight","onSelect","media","inline","undefined","noImage","Object","keys","length","id","open","marginBottom","isSvg","dangerouslySetInnerHTML","style","callback","embedSvg","fetch","then","res","registerBlockType","useBlockProps","apiVersion","icon","category","edit","save"],"sourceRoot":""}