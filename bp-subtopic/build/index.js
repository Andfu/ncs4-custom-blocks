!function(t){var e={};function i(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(s,n,function(e){return t[e]}.bind(null,n));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=8)}([function(t,e){t.exports=window.wp.element},function(t,e){t.exports=window.wp.blockEditor},function(t,e){function i(){return t.exports=i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},t.exports.default=t.exports,t.exports.__esModule=!0,i.apply(this,arguments)}t.exports=i,t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=window.wp.components},function(t,e){t.exports=window.React},function(t,e){t.exports=window.wp.data},function(t,e){t.exports=window.wp.blocks},function(t,e){t.exports=function(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,i){"use strict";i.r(e);var s=i(2),n=i.n(s),r=i(0),l=i(6),o=i(1),a=i(4),c=i.n(a),d=i(3),u=i(7),h=i.n(u),p=i(5);class b extends c.a.Component{constructor(t){super(t),h()(this,"createClassName",(t,e=null)=>["ncs4-section","ncs4-bp-content",e?"ncs4-bp-content__"+e:null].join(" ")+" "+t),this.attributes=t.attributes,this.blockProps=t.blockProps}sanitize_string(t){if("string"==typeof t){t=(t=t.replace(/^\s+|\s+$/g,"")).toLowerCase();for(var e="àáäâèéëêìíïîòóöôùúüûñçěščřžýúůďťň·/_,:;",i=0,s=e.length;i<s;i++)t=t.replace(new RegExp(e.charAt(i),"g"),"aaaaeeeeiiiioooouuuuncescrzyuudtn------".charAt(i));return t.replace(".","-").replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/\//g,"")}}render(){throw new Error("BPSection child has not implemented render()")}}class m extends b{constructor(t){super(t),this.setAttributes=t.setAttributes,this.clientId=t.clientId,this.getBlockList=this.getBlockList.bind(this),this.signalChildren=this.signalChildren.bind(this),this.updateChildrenTitles=this.updateChildrenTitles.bind(this),this.onWPData=this.onWPData.bind(this),this.updateInheritedTitle=this.updateInheritedTitle.bind(this),this.updateTitle=this.updateTitle.bind(this),this.setStateAttributes=this.setStateAttributes.bind(this),this.setShowTitle=this.setShowTitle.bind(this),this.setOptionCreateAnchor=this.setOptionCreateAnchor.bind(this),this.setAnchorSlug=this.setAnchorSlug.bind(this),this.state={title:this.attributes.title,inheritedTitle:this.attributes.inheritedTitle,showTitle:this.attributes.showTitle,optionCreateAnchor:this.attributes.optionCreateAnchor,anchorSlug:this.attributes.anchorSlug,blockList:this.getBlockList()}}componentDidMount(){document.addEventListener("sectionTitleUpdate_"+this.clientId,t=>{this.updateInheritedTitle(t.detail.title)}),document.addEventListener("requestTitle",t=>{let e=this.getBlockList();e.includes(t.detail.id)&&(this.signalChild("sectionTitleUpdate",{title:this.state.title||this.state.inheritedTitle},t.detail.id),this.setState({blockList:e}))}),wp.data.subscribe(this.onWPData),this.state.inheritedTitle||document.dispatchEvent(new CustomEvent("requestTitle",{detail:{id:this.clientId}}))}componentWillUnmount(){document.removeEventListener("sectionTitleUpdate_"+this.clientId,t=>{this.updateInheritedTitle(t.detail.title)})}getBlockList(){return Object(p.select)("core/block-editor").getBlockOrder(this.clientId)}signalChild(t,e,i){document.dispatchEvent(new CustomEvent(t+"_"+i,{detail:e}))}signalChildren(t,e){for(let i of Object(p.select)("core/block-editor").getBlockOrder(this.clientId))this.signalChild(t,e,i)}updateChildrenTitles(t){this.signalChildren("sectionTitleUpdate",{title:t})}onWPData(){let t=this.getBlockList();t!=this.state.blockList&&this.setState({blockList:t})}updateInheritedTitle(t){this.setState({inheritedTitle:t},()=>{this.setAttributes({inheritedTitle:t})}),this.state.title||this.updateChildrenTitles(t)}updateTitle(t){this.setState({title:t},()=>{this.setAttributes({title:t})}),t?this.updateChildrenTitles(t):this.updateChildrenTitles(this.state.inheritedTitle)}setStateAttributes(t){this.setState(t,()=>{this.setAttributes(t)})}setShowTitle(t){this.setStateAttributes({showTitle:t})}setOptionCreateAnchor(t){this.setStateAttributes({optionCreateAnchor:t})}setAnchorSlug(t){this.setStateAttributes({anchorSlug:t})}}class f extends m{constructor(t){super(t),this.attributes=t.attributes,this.blockProps=t.blockProps,this.clientId=t.clientId,this.setAttributes=t.setAttributes,this.updateTitle=this.updateTitle.bind(this),this.updateIndex=this.updateIndex.bind(this),this.updateLink=this.updateLink.bind(this);let e=this.state;this.state={...e,inheritedTitle:null,id:t.attributes.id,link:t.attributes.link},document.addEventListener("subtopicsUpdate",this.updateIndex)}createClassName(t){return["ncs4-bp-subtopic"].join(" ")+" "+t}updateTitle(t){super.updateTitle(t),document.dispatchEvent(new CustomEvent("titleUpdate",{detail:{id:this.clientId,index:this.state.id,oldTitle:this.state.title,newTitle:t}})),this.setState({title:t}),this.setAttributes({title:t})}updateLink(t){const e=this.dashEncode(t);this.setState({link:e}),this.setAttributes({link:e})}updateIndex({detail:{id:t,index:e}}){t==this.clientId&&this.setState({id:e},()=>{this.setAttributes({id:e})})}dashEncode(t){return t.replaceAll(/[^\w]+/g,"-").replaceAll(/_+/g,"-").replace(/^-+/,"").replace(/-+$/,"")}render(){return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("section",n()({},this.blockProps,{id:"ncs4-bp-subtopic__"+this.attributes.id,className:this.createClassName(this.blockProps.className),style:{display:"block"}}),Object(r.createElement)("h2",{className:"ncs4-bp-subtopic-title"},this.state.title),Object(r.createElement)(o.InnerBlocks,null)),Object(r.createElement)(o.InspectorControls,null,Object(r.createElement)(d.PanelBody,{title:"General",initialOpen:!0},Object(r.createElement)(d.TextControl,{label:"Title",placeholder:"Subtopic Title...",value:this.state.title,onChange:t=>{this.updateTitle(t),this.updateLink(t)}}))))}}class g extends c.a.Component{constructor(t){super(t),this.attributes=t.attributes,this.blockProps=t.blockProps}createClassName(t){return["ncs4-bp-subtopic"].join(" ")+" "+t}render(){return Object(r.createElement)("section",n()({},this.blockProps,{id:"ncs4-bp-subtopic__"+this.attributes.id,className:this.createClassName(this.blockProps.className)}),Object(r.createElement)("div",{id:this.attributes.link,className:"bp-subtopic-anchor"}),Object(r.createElement)("h2",{className:"ncs4-bp-subtopic-title"},this.attributes.title,Object(r.createElement)("a",{href:"#"+this.attributes.link,className:"share-section",title:"Share this section"},Object(r.createElement)("span",{class:"dashicons dashicons-share"}))),Object(r.createElement)(o.InnerBlocks.Content,null))}}Object(l.registerBlockType)("ncs4-custom-blocks/bp-subtopic",{apiVersion:2,title:"Best Practices Subtopic",parent:["ncs4-custom-blocks/bp-content"],icon:"admin-page",category:"layout",attributes:{title:{type:"string",default:"Title"},link:{type:"string",default:""},id:{type:"number",default:-1}},edit:t=>Object(r.createElement)(f,n()({},t,{blockProps:Object(o.useBlockProps)()})),save:t=>Object(r.createElement)(g,n()({},t,{blockProps:o.useBlockProps.save()}))})}]);