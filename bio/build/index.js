!function(e){var t={};function l(o){if(t[o])return t[o].exports;var a=t[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.m=e,l.c=t,l.d=function(e,t,o){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(l.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)l.d(o,a,function(t){return e[t]}.bind(null,a));return o},l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="",l(l.s=8)}([function(e,t){e.exports=window.wp.element},function(e,t){e.exports=window.wp.components},function(e,t){e.exports=window.React},function(e,t){function l(){return e.exports=l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o])}return e},e.exports.default=e.exports,e.exports.__esModule=!0,l.apply(this,arguments)}e.exports=l,e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=window.wp.blockEditor},function(e,t){e.exports=function(e,t,l){return t in e?Object.defineProperty(e,t,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[t]=l,e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=window.wp.data},function(e,t){e.exports=window.wp.blocks},function(e,t,l){"use strict";l.r(t);var o=l(3),a=l.n(o),n=l(0),r=l(7),s=l(4),i=l(2),c=l.n(i),p=l(1),u=l(6);function b(e,t){return e&&t?"has-"+e+"-"+t:null}class m extends c.a.Component{render(){let e=this.props.label,t=(this.props.allowGradients,this.props.value),l=this.props.onChange,o=Object(u.select)("core/block-editor").getSettings();return Object(n.createElement)(n.Fragment,null,Object(n.createElement)("p",null,e),Object(n.createElement)(p.ColorPalette,{colors:o.colors,disableCustomColors:o.disableCustomColors,clearable:!o.disableCustomColors,value:t,onChange:e=>{let t=o.colors.filter(t=>t.color===e)[0];l({color:e,slug:t?t.slug:null})}}))}}function h(e){let t=Object(u.select)("core/block-editor").getSettings().colors;return function(e,t){let l=t.filter(t=>t.slug===e)[0];return l?l.color:null}(e.slug,t)}var d=l(5),g=l.n(d);class f extends c.a.Component{getChoices(e){let t=[];return e.forEach((e,l)=>{t[l]={attribute:e.attribute,value:e.value||e.default}}),t}getChoice(e,t){for(let l of t)if(l.attribute===e)return l}render(){let e=this.props.maxRadioOptions||5,t=this.props.options,l=this.props.onChange,o=this.getChoices(t),a=[...Array(t.length).keys()].map(a=>Object(n.createElement)(C,{key:a,maxRadioOptions:e,label:t[a].label,help:t[a].help,choices:t[a].choices,multiple:t[a].multiple,invertValue:t[a].invertValue,min:t[a].min,max:t[a].max,step:t[a].step,markStep:t[a].markStep,markRender:t[a].markRender,tooltipRender:t[a].tooltipRender,value:this.getChoice(t[a].attribute,o).value,disabled:t[a].disabled,callback:e=>{"function"==typeof t[a].onChange&&(e=t[a].onChange(e)),l({[t[a].attribute]:e})}}));return Object(n.createElement)(n.Fragment,null,a)}}class C extends c.a.Component{render(){let e=this.props.maxRadioOptions,t=this.props.value,l=this.props.label,o=this.props.help,a=this.props.choices,r=this.props.min,s=this.props.max,i=this.props.step,c=this.props.markStep,u=this.props.markRender,b=this.props.tooltipRender,m=this.props.multiple,h=this.props.invertValue||!1,d=this.props.disabled,g=this.props.callback;return Object(n.createElement)(n.Fragment,null,Array.isArray(t)?Object(n.createElement)(O,this.props):a?m?Object(n.createElement)(x,{label:l,help:o,options:a,value:t,callback:g,disabled:d}):a.length<=e?Object(n.createElement)(p.RadioControl,{label:l,help:o,selected:t,onChange:g,options:a,disabled:d}):Object(n.createElement)(p.SelectControl,{label:l,help:o,value:t,onChange:g,options:a,disabled:d}):isNaN(r)||isNaN(s)||isNaN(i)?Object(n.createElement)(p.ToggleControl,{label:l,help:o,checked:h!=Boolean(t),onChange:e=>g(h!=e),disabled:d}):Object(n.createElement)(j,{label:l,help:o,value:t,min:r,max:s,step:i,markStep:c,markRender:u,tooltipRender:b,disabled:d,callback:g}))}}class O extends c.a.Component{getProps(e,t){var l={...e};for(let[e,o]of Object.entries(l))Array.isArray(o)&&(l[e]=o[t]);return l}render(){let e=this.props.value,t=this.props.callback,l=[...Array(e.length).keys()].map(l=>Object(n.createElement)(C,a()({},this.getProps(this.props,l),{key:l,callback:o=>{let a=[...e];a[l]=o,t(a)}})));return Object(n.createElement)(n.Fragment,null,l)}}class x extends c.a.Component{constructor(e){super(e),this.id="ncs4-components-checkboxgroup-"+String(document.getElementsByClassName("ncs4-components-checkboxgroup").length)}render(){let e=this.props.label,t=this.props.help,l=this.props.value,o=this.props.options,a=this.props.disabled,r=this.props.callback,s=[...Array(o.length).keys()].map(e=>Object(n.createElement)(p.CheckboxControl,{key:e,label:o[e].label,checked:l.includes(o[e].value),disabled:a,name:this.id,onChange:t=>{var a=[...l];if(t)a.push(o[e].value);else{let t=a.indexOf(o[e].value);t>-1&&a.splice(t,1)}r(a)}}));return Object(n.createElement)("div",{className:"ncs4-components-checkboxgroup"},Object(n.createElement)("label",{className:"components-base-control__label css-pezhm9-StyledLabel e1puf3u2",for:this.id},e),Object(n.createElement)("p",{className:"components-base-control__help css-1gbp77-StyledHelp e1puf3u3"},t),s)}}class j extends c.a.Component{createMarks(e,t,l,o){var a=Array(Math.floor((t-e)/l)+1);for(let t=0;t<a.length;t++)a[t]={value:e,label:o(e)},e+=l;return a}render(){let e=this.props.label,t=this.props.help,l=this.props.value,o=this.props.min,a=this.props.max,r=this.props.step||1,s=this.props.markStep||r,i=this.props.markRender||(e=>String(e)),c=this.props.disabled,u=this.props.tooltipRender||i,b=this.props.callback;return Object(n.createElement)(p.RangeControl,{label:e,help:t,value:l,min:o,max:a,step:r,marks:this.createMarks(o,a,s,i),renderTooltipContent:u,disabled:c,onChange:b})}}c.a.Component;class v extends c.a.Component{validateNumber(e){return!Boolean(e)||v.reg.test(e)}render(){let e=this.validateNumber(this.props.value);return Object(n.createElement)(p.TextControl,{value:this.props.value,onChange:e=>{this.props.onChange(e),this.validateNumber(e)&&this.props.onChangeComplete(e)},label:"Phone",help:e?null:"Invalid phone number"})}}g()(v,"reg",/^(\+?[0-9]{1,4})?[ \-.]*[0-9]{3}[ \-.]*[0-9]{3}[ \-.]*[0-9]{4}$/);class y extends c.a.Component{validateEmail(e){return!Boolean(e)||y.reg.test(e)}render(){let e=this.validateEmail(this.props.value);return Object(n.createElement)(p.TextControl,{value:this.props.value,onChange:e=>{this.props.onChange(e),this.validateEmail(e)&&this.props.onChangeComplete(e)},label:"Email",help:e?null:"Invalid email address"})}}function E(e){return Object(n.createElement)("div",{dangerouslySetInnerHTML:{__html:e.svg}})}function k(e){return Object(n.createElement)(s.MediaUploadCheck,null,Object(n.createElement)(s.MediaUpload,{onSelect:e.onChange,value:e.img?e.img.id:null,allowedTypes:["image"],render:({open:t})=>Object(n.createElement)(p.Button,{className:e.img?"editor-post-featured-image__preview":"editor-post-featured-image__toggle",onClick:t},e.img?"image/svg+xml"===e.img.mime&&e.img.data?Object(n.createElement)(E,{svg:e.img.data}):Object(n.createElement)("img",{src:e.img.url}):"Choose an image")}))}function S(e){let t=e.img&&"image/svg+xml"===e.img.mime&&e.img.data;return Object(n.createElement)("div",a()({},e,t?{dangerouslySetInnerHTML:{__html:e.img.data}}:{}),e.img&&!t?Object(n.createElement)("img",{src:e.img.url}):null)}g()(y,"reg",/^(?:[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-zA-Z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/);let N="ncs4-custom-blocks_popup-type";class P extends c.a.Component{render(){let e=this.props.attributes,t="popup-"+e.id,l=e.bgColor.slug?null:e.bgColor.color,o=e.textColor.slug?null:e.textColor.color,a=`\n      #${t}:target {\n        display: block;\n      }\n    `;return Object(n.createElement)(n.Fragment,null,Object(n.createElement)("a",{className:"ncs4-popup-button",href:"#"+t},e.buttonTitle),Object(n.createElement)("div",{id:t,className:"ncs4-popup__wrapper"},Object(n.createElement)("a",{className:"ncs4-popup-overlay",href:"#!",style:{opacity:e.overlayOpacity}}),Object(n.createElement)("div",{className:"ncs4-popup-content__wrapper"},Object(n.createElement)("div",{className:["ncs4-popup-content",b(e.bgColor.slug,"background-color"),b(e.textColor.slug,"color"),e.optionSize].join(" "),style:{backgroundColor:l,"--palette-bg-color":l,color:o,"--palette-color":o}},this.props.children)),Object(n.createElement)("style",null,a)))}}g()(P,"classType",N),g()(P,"sizeOptions",[{value:"size-alert",label:"Alert"},{value:"size-small",label:"Small"},{value:"size-body",label:"Medium (body size)"},{value:"size-large",label:"Large"}]);class A extends c.a.Component{render(){let e=this.props.attributes,t=this.props.callback;return Object(n.createElement)(n.Fragment,null,Object(n.createElement)(p.PanelBody,{title:"Button settings",initialOpen:!0},Object(n.createElement)(p.TextControl,{label:"Button title",placeholder:"Show",value:e.buttonTitle,onChange:e=>{t({buttonTitle:e})}})),Object(n.createElement)(p.PanelBody,{title:"Popup area settings",initialOpen:!0},Object(n.createElement)(m,{label:"Popup background",value:e.bgColor.color,onChange:e=>{t({bgColor:e})}}),Object(n.createElement)(m,{label:"Popup text",value:e.textColor.color,onChange:e=>{t({textColor:e})}}),Object(n.createElement)(f,{options:[{attribute:"overlayOpacity",label:"Overlay opacity",value:Math.round(100*e.overlayOpacity),min:0,max:100,step:1,markStep:20,markRender:e=>String(e)+"%",onChange:e=>e/100},{attribute:"optionSize",label:"Content size",value:e.optionSize,choices:P.sizeOptions}],onChange:e=>{t(e)}})))}}function _(e){let t=function(){let e=document.getElementsByClassName(N),t=[];return e.forEach(e=>{let l=Object(u.select)("core/block-editor").getBlock(e.getAttribute("data-block")).attributes.id;t.push(/^\d+$/.test(l)?parseInt(l):l)}),t.sort()}();return e&&function(e,t){for(let l of t){if(l===e)return!1;if(e<l)return!0}return!0}(e,t)?e:String(function(e){let t="number"==typeof e[0]?e[0]:-1;for(let l=1;l<e.length&&!("number"!=typeof e[l]||e[l]-t-1);l++)t=e[l];return t+1}(t))}class w extends c.a.Component{render(){let e=this.props.blockProps,t=this.props.attributes;return Object(n.createElement)("div",a()({},e,{className:["ncs4-bio",e.className].join(" ")}),Object(n.createElement)(z,{img:t.img,name:t.name,position:t.position,phone:t.phone,email:t.email}),Object(n.createElement)(P,{attributes:{...t,optionSize:"size-body"}},Object(n.createElement)(T,{img:t.img,name:t.fullName,position:t.position,phone:t.phone,email:t.email})))}}function z(e){return Object(n.createElement)(n.Fragment,null,Object(n.createElement)(S,{img:e.img}),Object(n.createElement)("h5",{className:"ncs4-bio-name"},Object(n.createElement)("strong",null,e.name)),Object(n.createElement)("h5",{className:"ncs4-bio-position"},e.position),e.phone&&Object(n.createElement)("p",{className:"ncs4-bio-phone ncs4-bio-contact-info"},"Phone: ",Object(n.createElement)("a",{href:"tel:"+e.phone},e.phone)),e.email&&Object(n.createElement)("p",{className:"ncs4-bio-email ncs4-bio-contact-info"},"E-Mail: ",Object(n.createElement)("a",{href:"mailto:"+e.email},e.email)))}function T(e){return Object(n.createElement)(n.Fragment,null,Object(n.createElement)(z,e),Object(n.createElement)("hr",{class:"ncs4-bio-header-seperator"}))}class B extends c.a.Component{constructor(e){super(e),this.attributes=e.attributes,this.blockProps=e.blockProps,this.setAttributes=e.setAttributes,this.setStateAttributes=this.setStateAttributes.bind(this),this.imageChangeHandler=this.imageChangeHandler.bind(this),this.state={overlayOpacity:this.attributes.overlayOpacity,bgColor:this.attributes.bgColor,textColor:this.attributes.textColor,buttonTitle:this.attributes.buttonTitle,id:this.attributes.id,name:this.attributes.name,fullName:this.attributes.fullName,credentials:this.attributes.credentials,position:this.attributes.position,phone:this.attributes.phone,email:this.attributes.email,img:this.attributes.img}}componentDidMount(){this.setStateAttributes({id:_(this.state.id)}),this.setStateAttributes({bgColor:{color:h(this.state.bgColor),slug:this.state.bgColor.slug}}),this.setStateAttributes({textColor:{color:h(this.state.textColor),slug:this.state.textColor.slug}})}setStateAttributes(e){this.setState(e,()=>{this.setAttributes(e)})}imageChangeHandler(e){this.setStateAttributes({img:e})}render(){return Object(n.createElement)(n.Fragment,null,Object(n.createElement)(w,{blockProps:this.blockProps,attributes:this.state}),Object(n.createElement)(s.InspectorControls,null,Object(n.createElement)(p.PanelBody,{title:"Personal info"},Object(n.createElement)(k,{onChange:e=>{!function(e,t,l=!0){l&&"image/svg+xml"===e.mime?fetch(e.url).then(e=>e.text()).then(l=>{e.data=l,t(e)}):t(e)}(e,this.imageChangeHandler)},img:this.state.img}),Object(n.createElement)(p.TextControl,{value:this.state.name,label:"Name",help:"Name to display on page (not in popup)",placeholder:"Willy Wonka",onChange:e=>{this.setStateAttributes({name:e})}}),Object(n.createElement)(p.TextControl,{value:this.state.fullName,label:"Full name",help:"Name to display in bio popup header",placeholder:"Dr. Willy H. Wonka",onChange:e=>{this.setStateAttributes({fullName:e})}}),Object(n.createElement)(p.TextControl,{value:this.state.credentials,label:"Credentials",help:"Additional credentials, e.g. 'PhD.'",placeholder:"PhD, Doctor of Chocolatiering",onChange:e=>{this.setStateAttributes({credentials:e})}}),Object(n.createElement)(p.TextControl,{value:this.state.position,label:"Position",help:"The person's official job title",placeholder:"Director of Candy Research and Development",onChange:e=>{this.setStateAttributes({position:e})}})),Object(n.createElement)(p.PanelBody,{title:"Contact info",initialOpen:!1},Object(n.createElement)(v,{value:this.state.phone,onChange:e=>this.setState({phone:e}),onChangeComplete:e=>this.setAttributes({phone:e})}),Object(n.createElement)(y,{value:this.state.email,onChange:e=>this.setState({email:e}),onChangeComplete:e=>this.setAttributes({email:e})})),Object(n.createElement)(A,{attributes:this.state,callback:e=>{console.log(e),this.setStateAttributes(e)}})))}}Object(r.registerBlockType)("ncs4-custom-blocks/bio",{apiVersion:2,title:"Bio",icon:"id",category:"layout",attributes:{overlayOpacity:{type:"number",default:.9},bgColor:{type:"object",default:{color:null,slug:"white-bright"}},textColor:{type:"object",default:{color:null,slug:"secondary-1c"}},buttonTitle:{type:"string",default:"View Bio"},id:{type:"string"},optionSize:{type:"string",default:"size-body"},name:{type:"string"},fullName:{type:"string"},credentials:{type:"string"},position:{type:"string"},phone:{type:"string"},email:{type:"string"},img:{type:"object"}},edit:e=>Object(n.createElement)(B,a()({},e,{blockProps:Object(s.useBlockProps)()})),save:e=>Object(n.createElement)(w,a()({},e,{blockProps:s.useBlockProps.save()}))})}]);