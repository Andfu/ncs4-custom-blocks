{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///../js/ColorSelector.js","webpack:///../js/ImageControl.js","webpack:///../js/SelectControls.js","webpack:///../js/edit-component.js","webpack:///../js/hooks.js","webpack:///../js/utils.js","webpack:///../node_modules/@babel/runtime/helpers/defineProperty.js","webpack:///../node_modules/@babel/runtime/helpers/extends.js","webpack:///./src/edit.js","webpack:///./src/index.js","webpack:///./src/save.js","webpack:///external [\"wp\",\"blockEditor\"]","webpack:///external [\"wp\",\"blocks\"]","webpack:///external [\"wp\",\"components\"]","webpack:///external [\"wp\",\"data\"]","webpack:///external [\"wp\",\"element\"]","webpack:///external \"React\""],"names":["fromColorAttribute","attr","bg","customColor","slug","color","Object","assign","className","createColorClass","style","backgroundColor","prop","createColorStyle","attributes","props","ColorSelector","React","Component","render","label","allowGradients","value","onChange","settings","select","getSettings","colors","disableCustomColors","c","filter","obj","verifyColor","getColorBySlug","Svg","useInlineSvg","__html","img","data","mime","url","imageStyle","marginLeft","align","marginRight","ImageEdit","id","open","ImageSave","isSvg","mine","dangerouslySetInnerHTML","onImageChange","callback","embedSvg","fetch","then","res","text","OptionsControl","getChoices","options","choices","forEach","o","i","attribute","default","getChoice","maxRadioOptions","optionControls","Array","length","keys","map","help","multiple","invertValue","min","max","step","markStep","markRender","tooltipRender","disabled","v","OptionControl","isArray","isNaN","Boolean","b","OptionGroup","getProps","out","k","entries","values","vs","CheckboxGroup","constructor","String","document","getElementsByClassName","boxes","includes","choice","push","j","indexOf","splice","SliderControl","createMarks","marks","Math","floor","UnitControl","clamp","x","getUnitSettings","unit","units","toggleProps","toggleSelector","unitProps","unitSelector","sliderProps","slider","toggleAttr","toggleValue","unitValue","sliderValue","asString","selectorsDisabled","unitSettings","PhoneControl","validateNumber","num","reg","test","valid","n","EmailControl","validateEmail","s","e","onChangeComplete","Interface","Save","save","console","error","display","flexDirection","justifyContent","flex","state","blockProps","controlPanels","panel","key","setAttribute","colorToAttribute","colorObj","ControlPanel","initialOpen","controls","control","type","useToggle","toggleLabel","toggleHelp","enabled","selectorLabel","selectorChoices","sliderLabel","sliderHelp","toggler","initialState","useReducer","storeSetter","setState","useStore","useState","withAttributes","setAttributes","reducers","newState","parseAttributes","table","JSON","parse","warn","normalizeStringLength","str","useNbsp","addEllipses","richText","parseRichText","toString","outStr","spaces","repeat","slice","rootTag","voidTags","br","hr","traverse","root","visit","leaf","index","tag","hasEndTag","prototype","create","addLeaf","isVoidTag","chars","skip","tokens","workingStr","a","search","token","reduceTokens","textObj","arr","next","acc","recur","init","dynamicReduce","htmlOut","reduceFunc","Edit","trim","useImg","toolTipRender","bannerBg","source","selector","bannerColor","bannerText","margin","imgSize","registerBlockType","apiVersion","title","icon","category","edit","useBlockProps","bgColor","textColor","imgResolution","height","width","imgHeight","backend","stringify","join"],"mappings":"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CsB,GAAN,IAAa,CAACY,KAAd,GACE;AACE,OAAG,EAAKlC,KAAK,CAACsB,GAAN,CAAUG,GADpB;AAEE,SAAK,EAAKC,UAAU,CAAC1B,KAAD;AAFtB,IADF,GAKE,IAhBJ,CANC,CAAP;AA2BD,C,CAED;;AACO,SAASqC,aAAT,CAAuBf,GAAvB,EAA4BgB,QAA5B,EAAsCC,QAAQ,GAAG,IAAjD,EAAuD;AAC5D,MAAIA,QAAQ,IAAIjB,GAAG,CAACE,IAAJ,KAAa,eAA7B,EAA8C;AAC5CgB,SAAK,CAAClB,GAAG,CAACG,GAAL,CAAL,CACGgB,IADH,CACQC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EADf,EAEGF,IAFH,CAEQE,IAAI,IAAI;AACZrB,SAAG,CAACC,IAAJ,GAAWoB,IAAX;AACAL,cAAQ,CAAChB,GAAD,CAAR;AACD,KALH;AAMD,GAPD,MAOO;AACLgB,YAAQ,CAAChB,GAAD,CAAR;AACD;AACF,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC5HD;CAUA;AACA;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA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XN,MADF;AAgBD;;AA5B+C;;6EAArCE,Y,SAGE,2c;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC1nBf;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEe,SAASK,SAAT,CAAmBnI,KAAnB,EAA0B;AACvC,MAAIoI,IAAI,GAAGpI,KAAK,CAACqI,IAAjB;;AACA,MAAI,CAACD,IAAL,EAAW;AACTE,WAAO,CAACC,KAAR,CAAc,4DAAd;AACD;;AAED,SAAO,4IACL;AACE,SAAK,EAAI;AACPC,aAAO,EAAE,MADF;AAEPC,mBAAa,EAAE,KAFR;AAGPC,oBAAc,EAAE;AAHT;AADX,KAOE,yEAAC,IAAD,4EACO1I,KADP;AAEE,SAAK,EAAI,EACP,GAAGA,KAAK,CAACL,KADF;AAEPgJ,UAAI,EAAE;AAFC,KAFX;AAME,cAAU,EAAK3I,KAAK,CAAC4I,KANvB;AAOE,cAAU,EAAK5I,KAAK,CAAC6I,UAPvB;AAQE,WAAO,EAAK;AARd,KAPF,CADK,EAmBL,yEAAC,yEAAD,QACI7I,KAAK,CAAC8I,aAAN,CAAoBnF,GAApB,CACA,CAACoF,KAAD,EAAQC,GAAR,KACE,yEAAC,YAAD,4EACOD,KADP;AAEE,SAAK,EAAK/I,KAAK,CAAC4I,KAFlB;AAGE,gBAAY,EAAK5I,KAAK,CAACiJ,YAHzB;AAIE,OAAG,EAAKD;AAJV,KAFF,CADJ,CAnBK,CAAP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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.js\");\n","import React from 'react';\r\n\r\nimport { select } from '@wordpress/data';\r\nimport { ColorPalette } from '@wordpress/components';\r\n\r\n// Adds className and style properties to a color loaded from DB\r\nexport function fromColorAttribute(attr, bg = false) {\r\n  let customColor = attr.slug ? null : attr.color;\r\n\r\n  if (bg) {\r\n    return Object.assign({}, attr, {\r\n      className: createColorClass(attr.slug, \"background-color\"),\r\n      style: {\r\n        backgroundColor: customColor,\r\n        [\"--palette-bg-color\"]: customColor,\r\n      },\r\n    });\r\n  }\r\n\r\n  return Object.assign({}, attr, {\r\n    className: createColorClass(attr.slug, \"color\"),\r\n    style: {\r\n      color: customColor,\r\n      [\"--palette-color\"]: customColor,\r\n    },\r\n  });\r\n}\r\n\r\nexport function createColorClass(slug, prop) {\r\n  if (!slug || !prop) {\r\n    return null;\r\n  }\r\n  return \"has-\" + slug + \"-\" + prop;\r\n}\r\n\r\n// creates a style dictionary suitable for inline styling of custom colors\r\n/* input format:\r\n  [\r\n    { color: attrs.bgColor,\r\n      props: [ \"background-color\", \"--palette-bg-color\"],\r\n    },\r\n    { color: attrs.textColor,\r\n      props: [ \"color\", \"--palette-color\" ],\r\n    },\r\n  ]\r\n*/\r\nexport function createColorStyle(attributes) {\r\n  let style = {};\r\n  for (let attr of attributes) {\r\n    if (!attr.color) { continue }\r\n    let color = attr.color.slug ? null : attr.color.color;\r\n    for (let prop of attr.props) {\r\n      style[prop] = color;\r\n    }\r\n  }\r\n  return style;\r\n}\r\n\r\nexport class ColorSelector extends React.Component {\r\n  render() {\r\n    let label = this.props.label;\r\n    let allowGradients = this.props.allowGradients; // TODO\r\n    let value = this.props.value;\r\n    let onChange  = this.props.onChange;\r\n\r\n    let settings = select(\"core/block-editor\").getSettings();\r\n    return (\r\n      <>\r\n        <p>{ label }</p>\r\n        <ColorPalette\r\n          colors = { settings.colors }\r\n          disableCustomColors = { settings.disableCustomColors }\r\n          value = { value }\r\n          onChange = { (c) => {\r\n            let color = settings.colors.filter( (obj) => obj.color === c)[0];\r\n            onChange( {\r\n              color: c,\r\n              slug: color ? color.slug : null,\r\n            } );\r\n          }}\r\n        />\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport function verifyColor(color) {\r\n  let colors = select(\"core/block-editor\").getSettings().colors;\r\n  return getColorBySlug(color.slug, colors);\r\n}\r\n\r\nfunction getColorBySlug(slug, colors) {\r\n  let color = colors.filter( (obj) => obj.slug === slug)[0];\r\n  return color ? color.color : null;\r\n}\r\n","import React from 'react';\r\nimport { MediaUploadCheck, MediaUpload } from '@wordpress/block-editor';\r\nimport { Button } from '@wordpress/components';\r\n\r\n// Be careful that you only use trusted SVGs as they are not secure!\r\nexport function Svg(props) {\r\n  return <>\r\n    { props.useInlineSvg\r\n      ? <div\r\n          dangerouslySetInnerHTML = {{\r\n            __html: props.img.data\r\n          }}\r\n        />\r\n      : <embed\r\n          type = { props.img.mime }\r\n          src = { props.img.url }\r\n        />\r\n    }\r\n  </>\r\n}\r\n\r\n// Image object format:\r\n/*\r\nimg: {\r\n  mine = \"image/svg+xml\",\r\n  url = \"...\"\r\n  data = {svg data}\r\n  ...\r\n}\r\nBasically, it's WP's image object + svg data (if applicable)\r\nstored in a \"data\" attribute\r\n*/\r\n\r\nconst imageStyle = (props) => ({\r\n  marginLeft: (props.align == \"left\") ? 0 : \"auto\",\r\n  marginRight: (props.align == \"right\") ? 0 : \"auto\",\r\n})\r\n\r\n// Edit-side image display\r\nexport function ImageEdit(props) {\r\n  props.useInlineSvg = props.useInlineSvg == null ? true : props.useInlineSvg;\r\n\r\n  return (\r\n    <MediaUploadCheck>\r\n      <MediaUpload\r\n        onSelect = { props.onChange }\r\n        value = { props.img ? props.img.id : null }\r\n        allowedTypes = { ['image'] }\r\n        render = { ( {open} ) => (\r\n          <Button\r\n            className = {\r\n              props.img\r\n                ? 'editor-post-featured-image__preview'\r\n                : 'editor-post-featured-image__toggle'\r\n            }\r\n            onClick = { open }\r\n          >\r\n            { props.img\r\n              ? (props.img.mime === \"image/svg+xml\" && props.img.data\r\n                  ? <Svg\r\n                      img = { props.img }\r\n                      useInlineSvg = { props.useInlineSvg }\r\n                      style = { imageStyle(props) }\r\n                    />\r\n                  : <img\r\n                      src = { props.img.url }\r\n                      style = { imageStyle(props) }\r\n                    />\r\n                )\r\n              : \"Choose an image\"\r\n            }\r\n          </Button>\r\n        )}\r\n      />\r\n    </MediaUploadCheck>\r\n  );\r\n}\r\n\r\n// Front-end image display\r\nexport function ImageSave(props) {\r\n  let isSvg = props.img && props.img.mime === \"image/svg+xml\" && props.img.data;\r\n  props.useInlineSvg = props.useInlineSvg == null ? true : props.useInlineSvg;\r\n\r\n  return <>\r\n    { isSvg && !props.useInlineSvg\r\n      ? <embed\r\n          type = { props.img.mine }\r\n          src = { props.img.url }\r\n        />\r\n      : <div {...props}\r\n        { ...(\r\n          isSvg\r\n            ? { dangerouslySetInnerHTML: {\r\n              __html: props.img.data,\r\n              style: imageStyle(props),\r\n            }}\r\n            : {}\r\n          )\r\n        }\r\n      >\r\n        { props.img && !isSvg\r\n          ? <img\r\n              src = { props.img.url }\r\n              style = { imageStyle(props) }\r\n            />\r\n          : null\r\n        }\r\n      </div>\r\n    }\r\n  </>;\r\n}\r\n\r\n// Generic image change handler\r\nexport function onImageChange(img, callback, embedSvg = true) {\r\n  if (embedSvg && img.mime === \"image/svg+xml\") {\r\n    fetch(img.url)\r\n      .then(res => res.text())\r\n      .then(text => {\r\n        img.data = text;\r\n        callback(img);\r\n      });\r\n  } else {\r\n    callback(img);\r\n  }\r\n}\r\n","import React from 'react';\nimport {\n  SelectControl,\n  RadioControl,\n  ToggleControl,\n  CheckboxControl,\n  TextControl,\n  RangeControl,\n  PanelRow,\n} from '@wordpress/components';\n// Dev note: OptionsControl doesn't use multi-select SelectControls.\n// This is because WordPress's styling and implementation of it is terrible.\n\n// Creates inspector controls for selecting options via\n// radios, multi-select boxes, and range selects.\n// Implements functions for getting the default option, custom marks, etc\n\n/*\n  Option object format\n\n  {\n    attribute: <string>, // should be unique in the options array\n    label: <string>,\n    help: <string>,\n    choices: <array of {value, label}> | null, (null for boolean)\n\n    ( min, max, step required for sliders, choices must be null )\n    min: <number>,\n    max: <number>,\n    step: <number>,\n    markStep: <number>,\n    markRender: (number) => string,\n    tooltipRender: (number) => string,\n\n    multiple: <boolean> | false, ( checkboxgroup instead of radios )\n    invertValue: <boolean> | false, (inverts displayed value for booleans)\n    default: <value> | <array of value>, (arrays used for multiselects)\n    value: [value] | <array of value>,\n    disabled: <boolean> | false,\n    onChange: [value] => [value], (pre-processing hook before returning state object)\n  }\n\n*/\n\n/*\n  --- Example Usage ---\n  this.state = {\n    doToggle: true,\n    attr1: null,\n    attr2: null,\n    maxWidth: null,\n    minWidth: {\n      useMinWidth: false,\n      unit: \"%\",\n      value: 20,\n      asString: \"20%\",\n    },\n  }\n\n\n  let options = [\n    {\n      attribute: 'doToggle',\n      label: 'Toggle test',\n      default: false,\n      value: this.state.doToggle,\n    },\n    {\n      attribute: 'attr1',\n      label: 'Attribute one',\n      help: 'This is help text',\n      choices: [\n        { value: 'val1', label: 'Value one' },\n        { value: 'val2', label: 'Value two' },\n      ],\n      value: this.state.attr1,\n    },\n    {\n      attribute: 'attr2',\n      label: 'Attribute two',\n      choices: [\n        { value: 'a', label: 'A' },\n        { value: 'b', label: 'B' },\n        { value: 'c', label: 'C' },\n      ],\n      multiple: true,\n      default: 'c',\n      value: this.state.attr2,\n    },\n    {\n      attribute: 'maxWidth',\n      label: 'Max width',\n      help: 'SliderControl test',\n      min: 10,\n      max: 50,\n      step: 5,\n      markStep: 10,\n      markRender: (v) => String(v) + 'ch',\n      default: 30,\n      value: this.state.maxWidth,\n    },\n  ];\n\n  let units = [\n    {\n      value: \"%\",\n      label: \"%\",\n      min: 0,\n      max: 100,\n      step: 1,\n      markStep: 10,\n    },\n    {\n      value: \"vw\",\n      label: \"vw\",\n      min: 0,\n      max: 100,\n      step: 1,\n      markStep: 10,\n    },\n    {\n      value: \"ch\",\n      label: \"ch\",\n      min: 10,\n      max: 50,\n      step: 5,\n    },\n  ];\n\n  render() {\n    <OptionsControl\n      options = { options }\n      onChange = { (v) => { this.setState(v) } }\n    />\n    <UnitControl\n      label = \"Mininum Width\"\n      help = \"UnitControl test\"\n      toggleSelector = {{\n        attribute: \"useMinWidth\",\n        label: \"Use min width\",\n        help: \"toggleSelector\",\n        value: this.state.minWidth.useMinWidth,\n      }}\n      unitSelector = {{\n        label: \"Units\",\n        value: this.state.minWidth.unit,\n        units: units,\n      }}\n      slider = {{\n        label: \"Value\",\n        value: this.state.minWidth.value,\n      }}\n      onChange = { (v) => { this.setState( { minWidth: v } ) } }\n    />\n  }\n\n*/\n\n\n/*\nHandles enumerable selections\n(ToggleControl, CheckboxControl, SelectControl, RadioControl, RangeControl)\n\nProps (* denotes required props):\n  options*\n    array of option objects, format for which is above.\n\n  onChange\n    Callback, typically used to set state in the parent.\n    The callback is passed an object of `attribute: value` pairs\n\n  maxRadioOptions\n    max enumerable options before a SelectControl is used instead of\n    RadioControl/CheckboxControl, default 5.\n*/\nexport class OptionsControl extends React.Component {\n\n  // Returns attr: value pairs currently selected\n  getChoices(options) {\n    let choices = [];\n    options.forEach( (o, i) => {\n      choices[i] = {\n        attribute: o.attribute,\n        value: o.value || o.default,\n      };\n    });\n    return choices;\n  }\n\n  // returns choice from choices with the given attribute\n  getChoice(attribute, choices) {\n    for (let c of choices) {\n      if (c.attribute === attribute) {\n        return c;\n      }\n    }\n  }\n\n  render() {\n    let maxRadioOptions = this.props.maxRadioOptions || 5;\n    let options = this.props.options;\n    let onChange = this.props.onChange;\n\n    // array of {attribute: attr, value: val}}\n    let choices = this.getChoices(options);\n    let optionControls = [ ...Array(options.length).keys() ]\n      .map( (i) => (\n        <OptionControl\n          key = { i }\n          maxRadioOptions = { maxRadioOptions }\n          label = { options[i].label }\n          help = { options[i].help }\n          choices = { options[i].choices }\n          multiple = { options[i].multiple }\n          invertValue = { options[i].invertValue }\n          min = { options[i].min }\n          max = { options[i].max }\n          step = { options[i].step }\n          markStep = { options[i].markStep }\n          markRender = { options[i].markRender }\n          tooltipRender = { options[i].tooltipRender }\n          value = {\n            this.getChoice(options[i].attribute, choices).value\n          }\n          disabled = { options[i].disabled }\n          callback = { (v) => {\n            // allows for option-specific onChange hooks\n            if (typeof options[i].onChange === \"function\") {\n              v = options[i].onChange(v);\n            }\n            onChange( { [ options[i].attribute ]: v } ); // callback\n          } }\n        />\n      )\n    );\n\n    return (\n      <>\n        { optionControls }\n      </>\n    );\n  }\n}\n\nexport class OptionControl extends React.Component {\n  render() {\n    let maxRadioOptions = this.props.maxRadioOptions;\n    let value = this.props.value;\n    let label = this.props.label;\n    let help = this.props.help;\n    let choices = this.props.choices;\n\n    let min = this.props.min;\n    let max = this.props.max;\n    let step = this.props.step;\n    let markStep = this.props.markStep;\n    let markRender = this.props.markRender;\n    let tooltipRender = this.props.tooltipRender;\n\n    let multiple = this.props.multiple;\n    let invertValue = this.props.invertValue || false;\n    let disabled = this.props.disabled;\n    let callback = this.props.callback;\n\n    return (\n      <>\n      { Array.isArray(value)\n        ? <OptionGroup { ...this.props }/>\n        : !choices\n          ? !( isNaN(min) || isNaN(max) || isNaN(step) )\n            ? <SliderControl\n                label = { label }\n                help = { help }\n                value = { value }\n                min = { min }\n                max = { max }\n                step = { step }\n                markStep = { markStep }\n                markRender = { markRender }\n                tooltipRender = { tooltipRender }\n                disabled = { disabled }\n                callback = { callback }\n              />\n            : <ToggleControl\n                label = { label }\n                help = { help }\n                checked = { invertValue != Boolean(value) } // != <-> XOR\n                onChange = { (b) => callback(invertValue != b) }\n                disabled = { disabled }\n              />\n          : multiple\n            ? <CheckboxGroup\n                label = { label }\n                help = { help }\n                options = { choices }\n                value = { value }\n                callback = { callback }\n                disabled = { disabled }\n              />\n            : choices.length <= maxRadioOptions\n              ? <RadioControl\n                  label = { label }\n                  help = { help }\n                  selected = { value }\n                  onChange = { callback }\n                  options = { choices }\n                  disabled = { disabled }\n                />\n              : <SelectControl\n                  label = { label }\n                  help = { help }\n                  value = { value }\n                  onChange = { callback }\n                  options = { choices }\n                  disabled = { disabled }\n                />\n      }\n      </>\n    );\n  }\n}\n\n// a group of option controls that accepts array props and returns\n// an array of values\nexport class OptionGroup extends React.Component {\n\n  // Returns correct properties for a given Option index\n  getProps(props, i) {\n    var out = { ...props };\n    for (let [k, v] of Object.entries(out)) {\n      if (Array.isArray(v)) {\n        out[k] = v[i];\n      }\n    }\n    return out;\n  }\n\n  render() {\n    let values = this.props.value;\n    let callback = this.props.callback;\n    let options = [ ...Array(values.length).keys() ]\n      .map( (i) => (\n        <OptionControl { ...this.getProps(this.props, i) }\n          key = { i }\n          callback = { (v) =>{\n            let vs = [ ...values ];\n            vs[i] = v;\n            callback(vs);\n          }}\n        />\n      )\n    );\n    return (\n      <>\n        { options }\n      </>\n    );\n  }\n}\n\n// Creates multiple CheckboxControls from a group of attributes\nexport class CheckboxGroup extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.id = \"ncs4-components-checkboxgroup-\" +\n      String(\n        document.getElementsByClassName(\"ncs4-components-checkboxgroup\").length\n      );\n  }\n\n  render() {\n    let label = this.props.label;\n    let help = this.props.help;\n    let value = this.props.value;\n    let options = this.props.options;\n    let disabled = this.props.disabled;\n    let callback = this.props.callback;\n\n    let boxes = [ ...Array(options.length).keys() ]\n      .map( (i) => (\n        <CheckboxControl\n          key = { i }\n          label = { options[i].label }\n          checked = { value.includes(options[i].value) }\n          disabled = { disabled }\n          name = { this.id }\n          onChange = { (b) => {\n            var choice = [ ...value ];\n            if (b) {\n              choice.push(options[i].value);\n            } else {\n              let j = choice.indexOf(options[i].value);\n              if (j > -1) {\n                choice.splice(j, 1);\n              }\n            }\n            callback(choice);\n          }}\n        />\n      )\n    );\n    return (\n      <div\n        className = \"ncs4-components-checkboxgroup\"\n      >\n        <label\n          className = \"components-base-control__label css-pezhm9-StyledLabel e1puf3u2\"\n          for = { this.id }\n        >\n          { label }\n        </label>\n        <p\n          className = \"components-base-control__help css-1gbp77-StyledHelp e1puf3u3\"\n        >\n          { help }\n        </p>\n        { boxes }\n      </div>\n    );\n  }\n}\n\n// Handles number selects (RangeControl)\nexport class SliderControl extends React.Component {\n  createMarks(min, max, step, render) {\n    var marks = Array(Math.floor( (max - min) / step ) + 1);\n    for ( let i = 0; i < marks.length; i++) {\n      marks[i] = { value: min, label: render(min) }\n      min += step;\n    }\n    return marks;\n  }\n\n  render() {\n    let label = this.props.label;\n    let help = this.props.help;\n    let value = this.props.value;\n    let min = this.props.min;\n    let max = this.props.max;\n    let step = this.props.step || 1;\n    let markStep = this.props.markStep || step;\n    let markRender = this.props.markRender || ( (v) => String(v) );\n    let disabled = this.props.disabled;\n    let tooltipRender = this.props.tooltipRender || markRender;\n    let callback = this.props.callback;\n\n    return (\n      <RangeControl\n        label = { label }\n        help = { help }\n        value = { value }\n        min = { min }\n        max = { max }\n        step = { step }\n        marks = { this.createMarks(min, max, markStep, markRender) }\n        renderTooltipContent = { tooltipRender }\n        disabled = { disabled }\n        onChange = { callback }\n      />\n    );\n  }\n}\n\n// Handles unit selection\n// Toggle (optional)\n// unit selector\n// Range\n\nexport class UnitControl extends React.Component {\n  clamp(x, min, max) {\n    return Math.min(Math.max(x, min), max);\n  }\n\n  getUnitSettings(props){\n    for (let unit of props.units) {\n      if (unit.value === props.value) {\n        return unit;\n      }\n    }\n  }\n\n  render() {\n    let label = this.props.label;\n    let help = this.props.help;\n    let disabled = this.props.disabled;\n    let onChange = this.props.onChange;\n\n    let toggleProps = this.props.toggleSelector; // may be undefined\n    let unitProps = this.props.unitSelector;\n    let sliderProps = this.props.slider;\n    let toggleAttr = toggleProps && toggleProps.attribute;\n\n    let toggleValue = !toggleProps ||\n      ( toggleProps.value || toggleProps.default );\n    let unitValue = unitProps.value || unitProps.default;\n    let sliderValue = !isNaN(sliderProps.value)\n      ? sliderProps.value\n      : sliderProps.default;\n\n    // Set default values\n    if (\n      (toggleProps && typeof toggleProps.value === \"undefined\")\n      || typeof unitProps.value === \"undefined\"\n      || isNaN(sliderProps.value)\n    ) {\n      onChange({\n        [toggleAttr]: toggleValue,\n        unit: unitValue,\n        value: sliderValue,\n        asString: String(sliderValue) + unitValue,\n      });\n    }\n\n    let selectorsDisabled = disabled || !toggleValue\n\n    let unitSettings = this.getUnitSettings(unitProps);\n    return (\n      <>\n        { label && (\n          <p\n            className = \"components-base-control__label css-pezhm9-StyledLabel e1puf3u2\"\n          >\n            { label }\n          </p>\n        )}\n        <PanelRow>\n          { toggleAttr && (\n            <OptionControl { ...toggleProps }\n              value = { toggleValue }\n              callback = { (v) => onChange(\n                {\n                  [toggleAttr]: v,\n                  unit: unitValue,\n                  value: sliderValue,\n                  asString: String(sliderValue) + unitValue,\n                }\n              ) }\n            />\n          )}\n          <OptionControl { ...unitProps }\n            multiple = { false }\n            choices = { unitProps.units }\n            disabled = { disabled || !toggleValue }\n            callback = { (v) => {\n              let props = {\n                ...unitProps,\n                value: v,\n              };\n              let unitSettings = this.getUnitSettings(props);\n              onChange(\n              {\n                [toggleAttr]: toggleValue,\n                unit: v,\n                value: this.clamp(\n                  sliderValue,\n                  unitSettings.min,\n                  unitSettings.max\n                ),\n                asString: this.clamp(\n                  sliderValue,\n                  unitSettings.min,\n                  unitSettings.max\n                ) + v,\n              })\n            }\n          }\n          />\n        </PanelRow>\n        <SliderControl { ...sliderProps }\n          value = { sliderValue }\n          min = { unitSettings.min }\n          max = { unitSettings.max }\n          step = { unitSettings.step }\n          markStep = { unitSettings.markStep || unitSettings.step }\n          tooltipRender = {\n            (v) => String(v) + (unitSettings.label || unitSettings.value)\n          }\n          disabled = { disabled || !toggleValue }\n          callback = { (v) => onChange(\n            {\n              [toggleAttr]: toggleValue,\n              unit: unitValue,\n              value: this.clamp(v, unitSettings.min, unitSettings.max),\n              asString: this.clamp(\n                v,\n                unitSettings.min,\n                unitSettings.max\n              ) + unitValue,\n            }\n          ) }\n        />\n        { help && (\n          <p\n            className = \"components-base-control__help css-1gbp77-StyledHelp e1puf3u3\"\n          >\n            { help }\n          </p>\n        )}\n      </>\n    );\n  }\n}\n\nexport class PhoneControl extends React.Component {\n\n  static reg = /^(\\+?[0-9]{1,4})?[ \\-.]*[0-9]{3}[ \\-.]*[0-9]{3}[ \\-.]*[0-9]{4}$/;\n\n  validateNumber(num) {\n    return !Boolean(num) || PhoneControl.reg.test(num);\n  }\n\n  render() {\n    let valid = this.validateNumber(this.props.value);\n\n    return (\n      <TextControl\n        value = { this.props.value }\n        onChange = { (n) => {\n          this.props.onChange(n);\n        } }\n        label = \"Phone\"\n        help = { valid\n          ? null\n          : \"Unrecognized phone number format (perhaps you've made a typo?)\"\n        }\n      />\n    );\n  }\n}\n\nexport class EmailControl extends React.Component {\n\n  // https://stackoverflow.com/a/201378\n  static reg = /^(?:[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-zA-Z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\])$/\n\n  validateEmail(s) {\n    return !Boolean(s) || EmailControl.reg.test(s);\n  }\n\n  render() {\n    let valid = this.validateEmail(this.props.value);\n\n    return (\n      <TextControl\n        value = { this.props.value }\n        onChange = { (e) => {\n          this.props.onChange(e); // set state\n          if (this.validateEmail(e)) {\n            this.props.onChangeComplete(e); // set attribute\n          }\n        } }\n        label = \"Email\"\n        help = { valid\n          ? null\n          : \"Invalid email address\"\n        }\n      />\n    );\n  }\n}\n","/* High-level abstraction for common block patterns\n * Assumes that the edit block calls the save block for markup\n * and just adds on some backend logic and controls for handling attributes\n */\n\nimport { InspectorControls } from '@wordpress/block-editor';\nimport { PanelBody, TextControl } from '@wordpress/components';\nimport { UnitControl, OptionsControl } from './SelectControls';\nimport { ColorSelector } from './ColorSelector';\nimport { ImageEdit, onImageChange } from './ImageControl';\n\n/* Example usage:\n\nexport default function Edit(props) {\n  let [state, setAttribute, setState] = withAttributes(\n    props.attributes,\n    props.setAttributes,\n    { ...props.attributes },\n    {\n      \"text\": s => s.trim(),\n      \"link\": (s, attrs) => verifyLink(s) ? s : attrs.link,\n    },\n  );\n\n  return (\n    <Interface\n      { ...props }\n      state = { state }\n      setAttribute = { setAttribute }\n      controlPanels = { [\n        {\n          label: \"Panel Label\",\n          controls: [\n            {\n              type: \"text\",\n              label: \"Text input\",\n              attribute: \"textAttr\",\n              placeholder: \"Type here...\",\n            },\n            {\n              type: \"unit\",\n              label: \"Unit input\",\n              help: \"Use the slider below to... \"\n              attribute: \"unitAttr\",\n              useToggle: true,\n              toggleLabel: \"Use unit\",\n              toggleHelp: \"Help text\",\n              selectorLabel: \"Units\",\n              selectorChoices: [\n                { value: \"%\", label: \"%\", min: 0, max: 100, step: 1, markStep: 10 },\n              ],\n              sliderLabel: \"Value\",\n              sliderHelp: \"Help text\",\n            },\n            {\n              type: \"choice\",\n              label: \"Enumerable input\",\n              attribute: \"choiceAttr\",\n              min: 2,\n              max: 10,\n              step: 1, // defaults to 1\n            },\n            {\n              type: \"choice\",\n              label: \"Enumerable input 2\",\n              attribute: \"choiceAttr2\",\n              choices: [\n                { value: \"1fr\", label: \"Equal Width\" },\n                { value: \"auto\", label: \"Auto Width\" },\n              ],\n              multiple: false,\n            },\n            {\n              type: \"choice\", // creates a toggle option\n              label: \"Enumerable input 3\",\n              attribute: \"choiceAttr3\",\n              default: false,\n              invertValue: false,\n            },\n          ],\n        },\n        {\n          label: \"Panel 2\",\n          controls: [\n            ...\n          ],\n        },\n      ] }\n    />\n  );\n\n}\n\n*/\n\nexport default function Interface(props) {\n  let Save = props.save;\n  if (!Save) {\n    console.error(\"Prop 'save' is null or undefined. React component expected\");\n  }\n\n  return <>\n    <div\n      style = {{\n        display: \"flex\",\n        flexDirection: \"row\",\n        justifyContent: \"center\",\n      }}\n    >\n      <Save\n        { ...props }\n        style = {{\n          ...props.style,\n          flex: \"0 1 840px\",\n        }}\n        attributes = { props.state }\n        blockProps = { props.blockProps }\n        backend = { true }\n      />\n    </div>\n    <InspectorControls>\n      { props.controlPanels.map(\n        (panel, key) =>\n          <ControlPanel\n            { ...panel }\n            state = { props.state }\n            setAttribute = { props.setAttribute }\n            key = { key }\n          />\n      )}\n    </InspectorControls>\n  </>\n}\n\n// removes extra editor-side color data\nexport function colorToAttribute(colorObj) {\n  return {\n    color: colorObj.color,\n    slug: colorObj.slug,\n  }\n}\n\nfunction ControlPanel(props) {\n  let initialOpen = props.initialOpen != null ? props.initialOpen : true;\n  let setAttribute = props.setAttribute;\n  let state = props.state;\n\n  return (\n    <PanelBody\n      title = { props.label }\n      initialOpen = { initialOpen }\n    >\n      { props.controls.map( (control, key) => {\n        switch (control.type) {\n          case \"text\": {\n            return (\n              <TextControl\n                { ...control }\n                key = { key }\n                value = { state[control.attribute] }\n                onChange = { setAttribute(control.attribute) }\n              />\n            );\n\n            break;\n          }\n\n          case \"unit\": {\n            return (\n              <UnitControl\n                { ...control }\n                key = { key }\n                toggleSelector = { control.useToggle\n                  ? {\n                    attribute: \"enabled\",\n                    label: control.toggleLabel,\n                    help: control.toggleHelp,\n                    value: state[control.attribute.enabled],\n                  }\n                  : {}\n                }\n                unitSelector = {{\n                  label: control.selectorLabel,\n                  value: state[control.attribute.unit],\n                  units: control.selectorChoices,\n                }}\n                slider = {{\n                  label: control.sliderLabel,\n                  help: control.sliderHelp,\n                  value: state[control.attribute.value],\n                }}\n                onChange = { (obj) =>\n                  setAttribute(control.attribute)(obj[control.attribute])\n                }\n              />\n            );\n\n            break;\n          }\n\n          case \"color\": {\n            return (\n              <ColorSelector\n                { ...control }\n                key = { key }\n                value = { state[control.attribute].color }\n                onChange = { setAttribute(control.attribute) }\n              />\n            );\n\n            break;\n          }\n\n          case \"image\": {\n            return (\n              <ImageEdit\n                { ...control }\n                onChange = { (i) => onImageChange(\n                  i,\n                  setAttribute(control.attribute),\n                )}\n                img = { state[control.attribute] }\n              />\n            );\n\n            break;\n          }\n\n          case \"choice\": {\n            return (\n              <OptionsControl\n                options = { [\n                  {\n                    ...control,\n                    value: state[control.attribute],\n                  }\n                ] }\n                key = { key }\n                type = { control.type }\n                onChange = { (obj) =>\n                  setAttribute(control.attribute)(obj[control.attribute])\n                }\n              />\n            );\n          }\n\n          default: {\n            console.error(\"ControlPanel: Invalid control type '\" + control.type + \"'\");\n          }\n        }\n      } ) }\n    </PanelBody>\n  );\n}\n","import React, { useState } from 'react';\r\n\r\nconst toggler = state => !state;\r\nexport function useToggle(initialState = false) {\r\n  return React.useReducer(toggler, initialState);\r\n}\r\n\r\n\r\nconst storeSetter = (state, setState) => (attr) => (value) => setState(\r\n  Object.assign( {}, state, { [attr]: value } )\r\n)\r\nexport function useStore(initialState = {}) {\r\n  let [state, setState] = useState(initialState);\r\n  return [\r\n    state,\r\n    storeSetter(state, setState),\r\n  ];\r\n}\r\n\r\n// functions as useStore/useState but updates attributes at the same time\r\n// Takes an optional \"reducer\" function for any attribute.\r\n// The reducer takes the current attributes and a value and should return a new\r\n// value to be written to the attribute, the state will always be written directly.\r\nexport function withAttributes(\r\n    attributes,\r\n    setAttributes,\r\n    initialState = {},\r\n    reducers = {}\r\n  ) {\r\n  let [state, setState] = useStore(initialState);\r\n  let setAttribute = (attr) => (value) => {\r\n    setState(attr)(value);\r\n    storeSetter({}, setAttributes)(attr)(\r\n      typeof reducers[attr] === \"function\" && reducers[attr].length <= 2\r\n        ? reducers[attr](value, attributes)\r\n        : value\r\n    )\r\n  };\r\n\r\n  return [\r\n    state,\r\n    setAttribute,\r\n    (newState) => {\r\n      for (let attr in newState) {\r\n        setAttribute(attr)(newState[attr]);\r\n      }\r\n    },\r\n  ];\r\n}\r\n","// ensures loaded attributes from the database are cast to their correct type\r\nexport function parseAttributes(table, data) {\r\n  let out = {};\r\n  for (let attr in data) {\r\n    if (\r\n        typeof data[attr] === \"string\" && table[attr] &&\r\n        typeof table[attr] === \"object\" && table[attr].type\r\n      ) {\r\n      switch (table[attr].type) {\r\n        case \"string\": {\r\n          out[attr] = data[attr];\r\n          break;\r\n        }\r\n\r\n        case \"boolean\": {\r\n          out[attr] = Boolean(data[attr]);\r\n          break;\r\n        }\r\n\r\n        case \"integer\":\r\n        case \"number\":\r\n        case \"json\": {\r\n          out[attr] = JSON.parse(data[attr]);\r\n          break;\r\n        }\r\n\r\n        case \"null\": {\r\n          if (data[attr] !== null && data[attr] !== \"\" && data[attr] !== \"null\") {\r\n            console.warn(\"Attribute '\" + attr +\r\n              \"': expected null, got '\" + data[attr] + \"'\"\r\n            );\r\n          }\r\n          out[attr] = null;\r\n          break;\r\n        }\r\n\r\n        default: {\r\n          console.warn(\r\n            \"Attribute '\" + attr + \"': Unknown type '\" + table[attr].type + \"'\"\r\n          );\r\n        }\r\n      }\r\n    } else {\r\n      out[attr] = data[attr];\r\n    }\r\n  }\r\n  return out;\r\n}\r\n\r\nexport function normalizeStringLength(str, n, useNbsp = true, addEllipses = true) {\r\n  let richText = parseRichText(str);\r\n  if (richText.length === n) {\r\n    return richText.toString(); // no shortening or lengthening needed\r\n  }\r\n  let outStr;\r\n  if (richText.length <= n) {\r\n    let spaces = addEllipses ? n - 3 - richText.length : n - richText.length;\r\n    outStr = richText.toString();\r\n    outStr += useNbsp ? \" \" + \"&nbsp;\".repeat(spaces - 1) : \" \".repeat(spaces);\r\n  } else {\r\n    richText = richText.slice(0, addEllipses ? n - 3 : n);\r\n    outStr = richText.toString();\r\n    outStr += addEllipses ? \"...\" : \"\";\r\n  }\r\n  return outStr;\r\n}\r\n\r\n/*\r\n  Takes a rich text string and returns an object of the form\r\n  {\r\n    length: <int>,\r\n    tag: <html element name>, // e.g. \"em\", \"strong\"\r\n    hasEndTag: <false | true>,\r\n    text: [string | rich text object],\r\n    slice: (min, max) => <rich text object>,\r\n    toString: () => <string>,\r\n  }\r\n*/\r\n\r\nfunction parseRichText(str, rootTag = null) {\r\n  // tag: charValue,\r\n  const voidTags = {\r\n    br: 30,\r\n    hr: 30,\r\n  }\r\n\r\n  const traverse = (root, visit) => {\r\n    root.text.forEach(\r\n      (leaf, index) => typeof leaf === \"object\"\r\n        ? leaf.tag && !leaf.hasEndTag\r\n          ? visit(leaf, root, index) // \"visit\" void tags\r\n          : traverse(leaf, visit)\r\n        : visit(leaf, root, index)\r\n    );\r\n  }\r\n\r\n  const prototype = {\r\n    slice(min, max) {\r\n      if (min < 0) {\r\n        slice(this.length + min);\r\n      }\r\n      if (max < 0) {\r\n        slice(this.length + max);\r\n      }\r\n      max = max == null ? this.length : max;\r\n\r\n      let out = Object.assign(Object.create(prototype), this);\r\n      out.text = [];\r\n      let i = 0;\r\n\r\n      const addLeaf = (leaf, root) => {\r\n        let isVoidTag = typeof leaf === \"object\" && leaf.tag && !leaf.hasEndTag;\r\n\r\n        // leaf is a rich text object\r\n        if (isVoidTag) {\r\n          if (i < min || i + leaf.length > max) {\r\n            // skip tag\r\n            i += leaf.length;\r\n          } else {\r\n            // add tag\r\n            i += leaf.length;\r\n            out.text.push(leaf);\r\n            out.length += leaf.length;\r\n          }\r\n          return;\r\n\r\n        // leaf is a string\r\n        } else {\r\n          let value = Object.assign(Object.create(prototype), root);\r\n          let text = \"\";\r\n          let chars = 0;\r\n          if (leaf.length === 0) {\r\n            return; // empty string\r\n          }\r\n\r\n          if (i < min) {\r\n            // skip characters until i == min\r\n            if (i + leaf.length >= min) {\r\n              let skip = min - i;\r\n              i += skip;\r\n              chars = Math.min(leaf.length, max - min);\r\n              text = leaf.slice(skip, skip + chars);\r\n            } else {\r\n              // leaf doesn't reach up to the min index\r\n              i += leaf.length;\r\n            }\r\n          } else if (i < max) {\r\n            // min <= i < max\r\n            chars = Math.min(leaf.length, max - i);\r\n            text = leaf.slice(0, chars);\r\n            i += chars;\r\n          }\r\n\r\n          if (text !== \"\") {\r\n            value.text = [text];\r\n            value.length = chars;\r\n            out.text.push(value);\r\n            out.length = Math.max(0, i - min);\r\n          }\r\n        }\r\n      }\r\n\r\n      traverse(this, addLeaf);\r\n      return out;\r\n    },\r\n\r\n    toString() {\r\n      let out = \"\";\r\n\r\n      const addLeaf = (leaf, root, index) => {\r\n        if (typeof leaf === \"object\" && leaf.tag && !leaf.hasEndTag) {\r\n          // void tag\r\n          out += \"<\" + leaf.tag + \">\";\r\n          return;\r\n        }\r\n\r\n        if (root.tag && index === 0) {\r\n          out += \"<\" + root.tag + \">\";\r\n        }\r\n\r\n        out += leaf;\r\n\r\n        if (root.tag && root.hasEndTag && index === root.text.length - 1) {\r\n          out += \"</\" + root.tag + \">\";\r\n        }\r\n      }\r\n\r\n      traverse(this, addLeaf);\r\n\r\n      return out;\r\n    },\r\n\r\n  }\r\n\r\n  let out = Object.create(prototype);\r\n  out = Object.assign(out, {\r\n    length: 0,\r\n    tag: rootTag,\r\n    hasEndTag: false,\r\n    text: [],\r\n  });\r\n\r\n  // tokenize string\r\n\r\n  let tokens = [];\r\n  let workingStr = str;\r\n  let a = workingStr.search(\"<\");\r\n  let b = workingStr.search(\">\");\r\n  while (a !== -1 && b !== -1) {\r\n    let token = workingStr.slice(0, a);\r\n    if (token !== \"\") {\r\n      // there is a string token\r\n      tokens.push(token);\r\n    }\r\n    // handle html token\r\n    tokens.push(workingStr.slice(a, b + 1));\r\n    workingStr = workingStr.slice(b + 1);\r\n    a = workingStr.search(\"<\");\r\n    b = workingStr.search(\">\");\r\n  }\r\n  // handle the rest of the string\r\n  if (workingStr !== \"\") {\r\n    tokens.push(workingStr);\r\n  }\r\n\r\n  const reduceTokens = (textObj, token, index, arr) => {\r\n    const next = (acc, index) => () => reduceTokens(\r\n      Object.assign(Object.create(prototype), acc),\r\n      arr[index + 1],\r\n      index + 1,\r\n      arr,\r\n    );\r\n    const recur = (arr, init) => dynamicReduce(arr, reduceTokens, init);\r\n\r\n    if (textObj.hasEndTag || index >= arr.length) {\r\n      return textObj;\r\n    }\r\n\r\n    if (/^<\\/.*>$/.test(token)) {\r\n      // HTML end tag\r\n      a = token.search(\"<\") + 1;\r\n      b = token.search(\">\");\r\n      let tag = token.slice(a + 1, b);\r\n      if (tag === textObj.tag) {\r\n        // exit reduce\r\n        textObj.hasEndTag = true;\r\n        return textObj;\r\n      }\r\n\r\n    } else if (/^<.*>$/.test(token)) {\r\n      // HTML start tag\r\n      a = token.search(\"<\");\r\n      b = token.search(\">\");\r\n      let htmlOut = Object.create(prototype);\r\n      htmlOut = Object.assign(htmlOut, {\r\n        length: 0,\r\n        tag: token.slice(a + 1, b),\r\n        hasEndTag: false,\r\n        text: [],\r\n      });\r\n\r\n      if (voidTags[htmlOut.tag]) {\r\n        htmlOut.length = voidTags[htmlOut.tag];\r\n      } else {\r\n        htmlOut = recur(arr.slice(index + 1), htmlOut);\r\n        index += 1 + htmlOut.text.length; // prevent going over the same entries twice\r\n      }\r\n      textObj.text.push(htmlOut);\r\n      textObj.length += htmlOut.length;\r\n\r\n    } else {\r\n      // normal string\r\n      textObj.text.push(token);\r\n      textObj.length += token.length;\r\n    }\r\n    if (textObj.tag && index + 1 === arr.length && !textObj.hasEndTag) {\r\n      console.error(\"EOL reached: Expected closing tag for <\" + textObj.tag + \">\");\r\n    }\r\n    return next(textObj, index);\r\n  }\r\n\r\n  out = dynamicReduce(tokens, reduceTokens, out);\r\n  return out;\r\n}\r\n\r\nfunction dynamicReduce(arr, reduceFunc, init) {\r\n  let value = reduceFunc(init, arr[0], 0, arr);\r\n  while (typeof value === \"function\") {\r\n    value = value();\r\n  }\r\n  return value;\r\n}\r\n","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _extends() {\n  module.exports = _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n  return _extends.apply(this, arguments);\n}\n\nmodule.exports = _extends;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","import Save from './save.js';\r\n\r\nimport Interface, { colorToAttribute } from '../../js/edit-component';\r\nimport { withAttributes } from '../../js/hooks';\r\n\r\nexport default function Edit(props) {\r\n  let [state, setAttribute, setState] = withAttributes(\r\n    props.attributes,\r\n    props.setAttributes,\r\n    { ...props.attributes },\r\n    {\r\n      \"bannerText\": (s) => s.trim(),\r\n    },\r\n  );\r\n\r\n  return (\r\n    <Interface\r\n      { ...props }\r\n      save = { Save }\r\n      state = { state }\r\n      setAttribute = { setAttribute }\r\n      controlPanels = { [\r\n        {\r\n          label: \"General\",\r\n          controls: [\r\n            {\r\n              type: \"choice\",\r\n              label: \"Use icon\",\r\n              attribute: \"useImg\",\r\n            },\r\n            {\r\n              type: \"image\",\r\n              label: \"Icon\",\r\n              attribute: \"img\",\r\n              disabled: !state.useImg,\r\n            },\r\n            {\r\n              type: \"choice\",\r\n              label: \"Icon size\",\r\n              attribute: \"imgSize\",\r\n              min: 32,\r\n              max: 256,\r\n              markStep: 32,\r\n              step: 16,\r\n              toolTipRender: (v) => String(v) + \"px\",\r\n            },\r\n            {\r\n              type: \"color\",\r\n              label: \"Banner background color\",\r\n              attribute: \"bannerBg\",\r\n            },\r\n            {\r\n              type: \"color\",\r\n              label: \"Banner text color\",\r\n              attribute: \"bannerColor\",\r\n            },\r\n            {\r\n              type: \"choice\",\r\n              label: [\r\n                \"Margin Top (rem)\",\r\n                \"Margin Right (rem)\",\r\n                \"Margin Bottom (rem)\",\r\n                \"Margin Left (rem)\",\r\n              ],\r\n              attribute: \"margin\",\r\n              min: 0,\r\n              max: 5,\r\n              step: 0.5,\r\n              toolTipRender: (v) => String(v) + \"rem\",\r\n            },\r\n          ]\r\n        },\r\n      ] }\r\n    />\r\n  );\r\n}\r\n","import { registerBlockType } from '@wordpress/blocks';\r\nimport { useBlockProps } from '@wordpress/block-editor';\r\nimport { parseAttributes } from '../../js/utils';\r\n\r\nimport Edit from './edit.js';\r\nimport Save from './save.js';\r\n\r\nconst attributes = {\r\n  bannerBg: {\r\n    type: \"json\",\r\n    source: \"attribute\",\r\n    attribute: \"data-banner-background\",\r\n    selector: \".ncs4-card__banner\",\r\n    default: {\r\n      color: \"#18243E\",\r\n      slug: \"primary-1\",\r\n    },\r\n  },\r\n  bannerColor: {\r\n    type: \"json\",\r\n    source: \"attribute\",\r\n    attribute: \"data-banner-color\",\r\n    selector: \".ncs4-card__banner\",\r\n    default: {\r\n      color: \"#e6e6e6\",\r\n      slug: \"white-dark\",\r\n    },\r\n  },\r\n  bannerText: {\r\n    type: \"string\",\r\n    source: \"html\",\r\n    selector: \".ncs4-card__banner-text\",\r\n  },\r\n  margin: {\r\n    type: \"json\",\r\n    source: \"attribute\",\r\n    attribute: \"data-margin\",\r\n    selector: \".ncs4-card\",\r\n    default: [3, 0, 3, 0],\r\n  },\r\n  useImg: {\r\n    type: \"boolean\",\r\n    source: \"attribute\",\r\n    attribute: \"data-use-image\",\r\n    selector: \".ncs4-card__banner\",\r\n    default: false,\r\n  },\r\n  img: {\r\n    type: 'json',\r\n    source: \"attribute\",\r\n    attribute: \"data-image\",\r\n    selector: \".ncs4-card__banner\",\r\n    default: {},\r\n  },\r\n  imgSize: {\r\n    type: 'number',\r\n    source: \"attribute\",\r\n    attribute: \"data-icon-width\",\r\n    selector: \".ncs4-card__banner\",\r\n    default: 64,\r\n  },\r\n};\r\n\r\nregisterBlockType( \"ncs4-custom-blocks/card\", {\r\n  apiVersion: 2,\r\n\r\n  title: 'Card',\r\n  icon: 'index-card',\r\n  category: 'layout',\r\n  attributes,\r\n\r\n  edit: (props) => (\r\n    <Edit\r\n      { ...props }\r\n      attributes = { parseAttributes(attributes, props.attributes) }\r\n      blockProps = { useBlockProps() }\r\n    />\r\n  ),\r\n  save: (props) => (\r\n    <Save\r\n      { ...props }\r\n      attributes = { parseAttributes(attributes, props.attributes) }\r\n      blockProps = { useBlockProps.save() }\r\n    />\r\n  ),\r\n});\r\n","import { InnerBlocks, RichText } from '@wordpress/block-editor';\r\nimport { fromColorAttribute } from '../../js/ColorSelector';\r\nimport { ImageSave } from '../../js/ImageControl';\r\n\r\nexport default function Save(props) {\r\n  let blockProps = props.blockProps;\r\n  let attributes = props.attributes;\r\n  let bgColor = fromColorAttribute(attributes.bannerBg, true);\r\n  let textColor = fromColorAttribute(attributes.bannerColor);\r\n\r\n  let imgResolution = attributes.img\r\n    ? attributes.img.height / attributes.img.width\r\n    : 9;\r\n  let imgHeight = imgResolution * attributes.imgSize;\r\n\r\n  return (\r\n    <div { ...blockProps }\r\n      { ...{\r\n        \"data-backend\": props.backend ? \"true\" : null,\r\n        \"data-margin\": JSON.stringify(attributes.margin),\r\n      } }\r\n      style = {{\r\n        ...props.style,\r\n        margin: attributes.margin\r\n          .map( (v) => String(v) + \"rem\" ).join(\" \"),\r\n      }}\r\n      className = {\r\n        [\r\n          \"ncs4-card\",\r\n          blockProps.className,\r\n        ].join(' ')\r\n      }\r\n    >\r\n      <div\r\n        { ...{\r\n          \"data-banner-background\": JSON.stringify(bgColor),\r\n          \"data-banner-color\": JSON.stringify(textColor),\r\n          \"data-use-image\": attributes.useImg,\r\n          \"data-image\": JSON.stringify(attributes.img),\r\n          \"data-icon-width\": attributes.imgSize,\r\n        } }\r\n        className = {\r\n          [\r\n            \"ncs4-card__banner\",\r\n            bgColor.className,\r\n            textColor.className,\r\n          ].join(' ')\r\n        }\r\n        style = {{\r\n          [\"--icon-width\"]: attributes.useImg ? attributes.imgSize + \"px\" : null,\r\n          [\"--icon-height\"]: attributes.useImg ? imgHeight + \"px\" : null,\r\n          ...bgColor.style,\r\n          ...textColor.style,\r\n        }}\r\n      >\r\n        { attributes.useImg && (\r\n          <ImageSave\r\n            className = \"ncs4-card__icon\"\r\n            img = { attributes.img }\r\n          />\r\n        )}\r\n        { props.backend\r\n          ? <RichText\r\n              className = \"ncs4-card__banner-text\"\r\n              tagName = \"p\"\r\n              value = { attributes.bannerText }\r\n              onChange = { props.setAttribute(\"bannerText\") }\r\n              placeholder = \"Banner heading\"\r\n            />\r\n          : <RichText.Content\r\n              className = \"ncs4-card__banner-text\"\r\n              tagName = \"p\"\r\n              value = { attributes.bannerText }\r\n            />\r\n        }\r\n      </div>\r\n      <div\r\n        className = \"ncs4-card__content\"\r\n      >\r\n        { props.backend\r\n          ? <InnerBlocks/>\r\n          : <InnerBlocks.Content/>\r\n        }\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","(function() { module.exports = window[\"wp\"][\"blockEditor\"]; }());","(function() { module.exports = window[\"wp\"][\"blocks\"]; }());","(function() { module.exports = window[\"wp\"][\"components\"]; }());","(function() { module.exports = window[\"wp\"][\"data\"]; }());","(function() { module.exports = window[\"wp\"][\"element\"]; }());","(function() { module.exports = window[\"React\"]; }());"],"sourceRoot":""}