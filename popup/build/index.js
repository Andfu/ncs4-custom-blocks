!function(e){var t={};function o(l){if(t[l])return t[l].exports;var r=t[l]={i:l,l:!1,exports:{}};return e[l].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=t,o.d=function(e,t,l){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:l})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var l=Object.create(null);if(o.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(l,r,function(t){return e[t]}.bind(null,r));return l},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=8)}([function(e,t){e.exports=window.wp.element},function(e,t){e.exports=window.React},function(e,t){e.exports=window.wp.components},function(e,t){function o(){return e.exports=o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(e[l]=o[l])}return e},e.exports.default=e.exports,e.exports.__esModule=!0,o.apply(this,arguments)}e.exports=o,e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=window.wp.blockEditor},function(e,t){e.exports=window.wp.data},function(e,t){e.exports=function(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=window.wp.blocks},function(e,t,o){"use strict";o.r(t);var l=o(3),r=o.n(l),s=o(0),a=o(7),n=o(4),i=o(1),c=o.n(i),p=o(5),u=o(6),b=o.n(u),h=o(2);class d extends c.a.Component{getChoices(e){let t=[];return e.forEach((e,o)=>{t[o]={attribute:e.attribute,value:e.value||e.default}}),t}getChoice(e,t){for(let o of t)if(o.attribute===e)return o}choicesToObject(e){var t={};for(let o of e)t[o.attribute]=o.value;return t}render(){let e=this.props.maxRadioOptions||5,t=this.props.options,o=this.props.onChange,l=this.getChoices(t),r=[...Array(t.length).keys()].map(r=>Object(s.createElement)(m,{key:r,maxRadioOptions:e,label:t[r].label,help:t[r].help,choices:t[r].choices,multiple:t[r].multiple,invertValue:t[r].invertValue,min:t[r].min,max:t[r].max,step:t[r].step,markStep:t[r].markStep,markRender:t[r].markRender,tooltipRender:t[r].tooltipRender,value:this.getChoice(t[r].attribute,l).value,disabled:t[r].disabled,callback:e=>{"function"==typeof t[r].onChange&&(e=t[r].onChange(e));var s=[...l];for(let o in s)if(s[o].attribute===t[r].attribute){s[o]={attribute:s[o].attribute,value:e};break}o(this.choicesToObject(s))}}));return Object(s.createElement)(s.Fragment,null,r)}}class m extends c.a.Component{render(){let e=this.props.maxRadioOptions,t=this.props.value,o=this.props.label,l=this.props.help,r=this.props.choices,a=this.props.min,n=this.props.max,i=this.props.step,c=this.props.markStep,p=this.props.markRender,u=this.props.tooltipRender,b=this.props.multiple,d=this.props.invertValue||!1,m=this.props.disabled,C=this.props.callback;return Object(s.createElement)(s.Fragment,null,Array.isArray(t)?Object(s.createElement)(g,this.props):r?b?Object(s.createElement)(x,{label:o,help:l,options:r,value:t,callback:C,disabled:m}):r.length<=e?Object(s.createElement)(h.RadioControl,{label:o,help:l,selected:t,onChange:C,options:r,disabled:m}):Object(s.createElement)(h.SelectControl,{label:o,help:l,value:t,onChange:C,options:r,disabled:m}):isNaN(a)||isNaN(n)||isNaN(i)?Object(s.createElement)(h.ToggleControl,{label:o,help:l,checked:d!=Boolean(t),onChange:e=>C(d!=e),disabled:m}):Object(s.createElement)(f,{label:o,help:l,value:t,min:a,max:n,step:i,markStep:c,markRender:p,tooltipRender:u,disabled:m,callback:C}))}}class g extends c.a.Component{getProps(e,t){var o={...e};for(let[e,l]of Object.entries(o))Array.isArray(l)&&(o[e]=l[t]);return o}render(){let e=this.props.value,t=this.props.callback,o=[...Array(e.length).keys()].map(o=>Object(s.createElement)(m,r()({},this.getProps(this.props,o),{key:o,callback:l=>{let r=[...e];r[o]=l,t(r)}})));return Object(s.createElement)(s.Fragment,null,o)}}class x extends c.a.Component{constructor(e){super(e),this.id="ncs4-components-checkboxgroup-"+String(document.getElementsByClassName("ncs4-components-checkboxgroup").length)}render(){let e=this.props.label,t=this.props.help,o=this.props.value,l=this.props.options,r=this.props.disabled,a=this.props.callback,n=[...Array(l.length).keys()].map(e=>Object(s.createElement)(h.CheckboxControl,{key:e,label:l[e].label,checked:o.includes(l[e].value),disabled:r,name:this.id,onChange:t=>{var r=[...o];if(t)r.push(l[e].value);else{let t=r.indexOf(l[e].value);t>-1&&r.splice(t,1)}a(r)}}));return Object(s.createElement)("div",{className:"ncs4-components-checkboxgroup"},Object(s.createElement)("label",{className:"components-base-control__label css-pezhm9-StyledLabel e1puf3u2",for:this.id},e),Object(s.createElement)("p",{className:"components-base-control__help css-1gbp77-StyledHelp e1puf3u3"},t),n)}}class f extends c.a.Component{createMarks(e,t,o,l){var r=Array(Math.floor((t-e)/o)+1);for(let t=0;t<r.length;t++)r[t]={value:e,label:l(e)},e+=o;return r}render(){let e=this.props.label,t=this.props.help,o=this.props.value,l=this.props.min,r=this.props.max,a=this.props.step||1,n=this.props.markStep||a,i=this.props.markRender||(e=>String(e)),c=this.props.disabled,p=this.props.tooltipRender||i,u=this.props.callback;return Object(s.createElement)(h.RangeControl,{label:e,help:t,value:o,min:l,max:r,step:a,marks:this.createMarks(l,r,n,i),renderTooltipContent:p,disabled:c,onChange:u})}}c.a.Component;class C extends c.a.Component{validateNumber(e){return C.reg.test(e)}render(){let e=this.validateNumber(this.props.value);return Object(s.createElement)(h.TextControl,{value:this.props.value,onChange:e=>{this.props.onChange(e),this.validateNumber(e)&&this.props.onChangeComplete(e)},label:"Phone",help:e?null:"Invalid phone number"})}}b()(C,"reg",/^(\+?[0-9]{1,4})?[ \-.]*[0-9]{3}[ \-.]*[0-9]{3}[ \-.]*[0-9]{4}$/);class v extends c.a.Component{validateEmail(e){return v.reg.test(e)}render(){let e=this.validateEmail(this.props.value);return Object(s.createElement)(h.TextControl,{value:this.props.value,onChange:e=>{this.props.onChange(e),this.validateEmail(e)&&this.props.onChangeComplete(e)},label:"Email",help:e?null:"Invalid email address"})}}function O(e,t){return e&&t?"has-"+e+"-"+t:null}b()(v,"reg",/^(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/);class y extends c.a.Component{render(){let e=this.props.label,t=(this.props.allowGradients,this.props.value),o=this.props.onChange,l=Object(p.select)("core/block-editor").getSettings();return Object(s.createElement)(s.Fragment,null,Object(s.createElement)("p",null,e),Object(s.createElement)(h.ColorPalette,{colors:l.colors,disableCustomColors:l.disableCustomColors,clearable:!l.disableCustomColors,value:t,onChange:e=>{let t=l.colors.filter(t=>t.color===e)[0];o({color:e,slug:t?t.slug:null})}}))}}function j(e){let t=Object(p.select)("core/block-editor").getSettings().colors;return function(e,t){let o=t.filter(t=>t.slug===e)[0];return o?o.color:null}(e.slug,t)}let k="ncs4-custom-blocks_popup-type";class E extends c.a.Component{render(){let e=this.props.attributes,t="popup-"+e.id,o=e.bgColor.slug?null:e.bgColor.color,l=e.textColor.slug?null:e.textColor.color,r=`\n      #${t}:target {\n        display: block;\n      }\n    `;return Object(s.createElement)(s.Fragment,null,Object(s.createElement)("a",{className:"ncs4-popup-button",href:"#"+t},e.buttonTitle),Object(s.createElement)("div",{id:t,className:"ncs4-popup__wrapper"},Object(s.createElement)("a",{className:"ncs4-popup-overlay",href:"#!",style:{opacity:e.overlayOpacity}}),Object(s.createElement)("div",{className:"ncs4-popup-content__wrapper"},Object(s.createElement)("div",{className:["ncs4-popup-content",O(e.bgColor.slug,"background-color"),O(e.textColor.slug,"color"),e.optionSize].join(" "),style:{backgroundColor:o,"--palette-bg-color":o,color:l,"--palette-color":l}},this.props.children)),Object(s.createElement)("style",null,r)))}}b()(E,"classType",k),b()(E,"sizeOptions",[{value:"size-alert",label:"Alert"},{value:"size-small",label:"Small"},{value:"size-body",label:"Medium (body size)"},{value:"size-large",label:"Large"}]);class S extends c.a.Component{render(){let e=this.props.attributes,t=this.props.callback;return Object(s.createElement)(s.Fragment,null,Object(s.createElement)(h.PanelBody,{title:"Button settings",initialOpen:!0},Object(s.createElement)(h.TextControl,{label:"Button title",placeholder:"Show",value:e.buttonTitle,onChange:e=>{t({buttonTitle:e})}})),Object(s.createElement)(h.PanelBody,{title:"Popup area settings",initialOpen:!0},Object(s.createElement)(y,{label:"Popup background",value:e.bgColor.color,onChange:e=>{t({bgColor:e})}}),Object(s.createElement)(y,{label:"Popup text",value:e.textColor.color,onChange:e=>{t({textColor:e})}}),Object(s.createElement)(d,{options:[{attribute:"overlayOpacity",label:"Overlay opacity",value:Math.round(100*e.overlayOpacity),min:0,max:100,step:1,markStep:20,markRender:e=>String(e)+"%",onChange:e=>e/100},{attribute:"optionSize",label:"Content size",value:e.optionSize,choices:E.sizeOptions}],onChange:e=>{t(e)}})))}}function w(e){let t=function(){let e=document.getElementsByClassName(k),t=[];return e.forEach(e=>{let o=Object(p.select)("core/block-editor").getBlock(e.getAttribute("data-block")).attributes.id;t.push(/^\d+$/.test(o)?parseInt(o):o)}),t.sort()}();return e&&function(e,t){for(let o of t){if(o===e)return!1;if(e<o)return!0}return!0}(e,t)?e:String(function(e){let t="number"==typeof e[0]?e[0]:-1;for(let o=1;o<e.length&&!("number"!=typeof e[o]||e[o]-t-1);o++)t=e[o];return t+1}(t))}class z extends c.a.Component{constructor(e){super(e),this.attributes=e.attributes,this.blockProps=e.blockProps,this.clientId=e.clientId,this.setAttributes=e.setAttributes,this.setStateAttributes=this.setStateAttributes.bind(this),this.handleSelected=this.handleSelected.bind(this),this.state={showModal:!1,overlayOpacity:this.attributes.overlayOpacity,bgColor:this.attributes.bgColor,textColor:this.attributes.textColor,buttonTitle:this.attributes.buttonTitle,id:this.attributes.id,optionSize:this.attributes.optionSize},this.state.optionSize||this.setStateAttributes({optionSize:sizeOptions.default()}),wp.data.subscribe(this.handleSelected)}componentDidMount(){this.setStateAttributes({id:w(this.state.id)}),this.setStateAttributes({bgColor:{color:j(this.state.bgColor),slug:this.state.bgColor.slug}}),this.setStateAttributes({textColor:{color:j(this.state.textColor),slug:this.state.textColor.slug}})}createClassName(e){return["ncs4-popup",E.classType,this.state.showModal?"is-selected":null].join(" ")+" "+e}setStateAttributes(e){this.setState(e,()=>{this.setAttributes(e)})}handleSelected(){let e=Object(p.select)("core/block-editor").getSelectedBlock();e&&(this.state.showModal||e.clientId!==this.clientId?this.state.showModal&&e.clientId!==this.clientId&&this.setState({showModal:!1}):this.setState({showModal:!0}))}render(){return Object(s.createElement)("div",r()({},this.blockProps,{className:this.createClassName(this.blockProps.className)}),Object(s.createElement)(E,{attributes:this.state},Object(s.createElement)(n.InnerBlocks,null)),Object(s.createElement)(n.InspectorControls,null,Object(s.createElement)(S,{attributes:this.state,callback:this.setStateAttributes})))}}class P extends c.a.Component{constructor(e){super(e),this.blockProps=e.blockProps,this.visible=e.visible||e.attributes.showOnLoad||!1}createClassName(e){return["ncs4-popup",E.classType].join(" ")+" "+e}render(){return Object(s.createElement)("div",r()({},this.blockProps,{className:this.createClassName(this.blockProps.className)}),Object(s.createElement)(E,{attributes:this.props.attributes},Object(s.createElement)(n.InnerBlocks.Content,null)))}}Object(a.registerBlockType)("ncs4-custom-blocks/popup",{apiVersion:2,title:"Popup",icon:"testimonial",category:"layout",attributes:{overlayOpacity:{type:"number",default:.9},bgColor:{type:"object",default:{color:null,slug:"white-bright"}},textColor:{type:"object",default:{color:null,slug:"secondary-1c"}},buttonTitle:{type:"string",default:"Show"},id:{type:"string"},optionSize:{type:"string",default:"size-body"}},edit:e=>Object(s.createElement)(z,r()({},e,{blockProps:Object(n.useBlockProps)()})),save:e=>Object(s.createElement)(P,r()({},e,{blockProps:n.useBlockProps.save()}))})}]);