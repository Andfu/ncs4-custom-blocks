!function(e){var t={};function l(s){if(t[s])return t[s].exports;var r=t[s]={i:s,l:!1,exports:{}};return e[s].call(r.exports,r,r.exports,l),r.l=!0,r.exports}l.m=e,l.c=t,l.d=function(e,t,s){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(l.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)l.d(s,r,function(t){return e[t]}.bind(null,r));return s},l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="",l(l.s=8)}([function(e,t){e.exports=window.wp.element},function(e,t){e.exports=window.React},function(e,t){e.exports=window.wp.components},function(e,t){function l(){return e.exports=l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&(e[s]=l[s])}return e},e.exports.default=e.exports,e.exports.__esModule=!0,l.apply(this,arguments)}e.exports=l,e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=window.wp.data},function(e,t){e.exports=window.wp.blockEditor},function(e,t){e.exports=function(e,t,l){return t in e?Object.defineProperty(e,t,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[t]=l,e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=window.wp.blocks},function(e,t,l){"use strict";l.r(t);var s={};l.r(s),l.d(s,"getIds",(function(){return M})),l.d(s,"requestId",(function(){return T})),l.d(s,"getNextId",(function(){return I}));var r={};l.r(r),l.d(r,"createId",(function(){return R})),l.d(r,"deleteId",(function(){return B}));var o,n,a,i,c,p=l(3),u=l.n(p),b=l(0),d=l(7),h=l(5),m=l(1),g=l.n(m),f=l(4),x=l(2),v=l(6),y=l.n(v);class O extends g.a.Component{getChoices(e){let t=[];return e.forEach((e,l)=>{t[l]={attribute:e.attribute,value:e.value||e.default}}),t}getChoice(e,t){for(let l of t)if(l.attribute===e)return l}render(){let e=this.props.maxRadioOptions||5,t=this.props.options,l=this.props.onChange,s=this.getChoices(t),r=[...Array(t.length).keys()].map(r=>Object(b.createElement)(C,{key:r,maxRadioOptions:e,label:t[r].label,help:t[r].help,choices:t[r].choices,multiple:t[r].multiple,invertValue:t[r].invertValue,min:t[r].min,max:t[r].max,step:t[r].step,markStep:t[r].markStep,markRender:t[r].markRender,tooltipRender:t[r].tooltipRender,value:this.getChoice(t[r].attribute,s).value,disabled:t[r].disabled,callback:e=>{"function"==typeof t[r].onChange&&(e=t[r].onChange(e)),l({[t[r].attribute]:e})}}));return Object(b.createElement)(b.Fragment,null,r)}}class C extends g.a.Component{render(){let e=this.props.maxRadioOptions,t=this.props.value,l=this.props.label,s=this.props.help,r=this.props.choices,o=this.props.min,n=this.props.max,a=this.props.step,i=this.props.markStep,c=this.props.markRender,p=this.props.tooltipRender,u=this.props.multiple,d=this.props.invertValue||!1,h=this.props.disabled,m=this.props.callback;return Object(b.createElement)(b.Fragment,null,Array.isArray(t)?Object(b.createElement)(j,this.props):r?u?Object(b.createElement)(k,{label:l,help:s,options:r,value:t,callback:m,disabled:h}):r.length<=e?Object(b.createElement)(x.RadioControl,{label:l,help:s,selected:t,onChange:m,options:r,disabled:h}):Object(b.createElement)(x.SelectControl,{label:l,help:s,value:t,onChange:m,options:r,disabled:h}):isNaN(o)||isNaN(n)||isNaN(a)?Object(b.createElement)(x.ToggleControl,{label:l,help:s,checked:d!=Boolean(t),onChange:e=>m(d!=e),disabled:h}):Object(b.createElement)(E,{label:l,help:s,value:t,min:o,max:n,step:a,markStep:i,markRender:c,tooltipRender:p,disabled:h,callback:m}))}}class j extends g.a.Component{getProps(e,t){var l={...e};for(let[e,s]of Object.entries(l))Array.isArray(s)&&(l[e]=s[t]);return l}render(){let e=this.props.value,t=this.props.callback,l=[...Array(e.length).keys()].map(l=>Object(b.createElement)(C,u()({},this.getProps(this.props,l),{key:l,callback:s=>{let r=[...e];r[l]=s,t(r)}})));return Object(b.createElement)(b.Fragment,null,l)}}class k extends g.a.Component{constructor(e){super(e),this.id="ncs4-components-checkboxgroup-"+String(document.getElementsByClassName("ncs4-components-checkboxgroup").length)}render(){let e=this.props.label,t=this.props.help,l=this.props.value,s=this.props.options,r=this.props.disabled,o=this.props.callback,n=[...Array(s.length).keys()].map(e=>Object(b.createElement)(x.CheckboxControl,{key:e,label:s[e].label,checked:l.includes(s[e].value),disabled:r,name:this.id,onChange:t=>{var r=[...l];if(t)r.push(s[e].value);else{let t=r.indexOf(s[e].value);t>-1&&r.splice(t,1)}o(r)}}));return Object(b.createElement)("div",{className:"ncs4-components-checkboxgroup"},Object(b.createElement)("label",{className:"components-base-control__label css-pezhm9-StyledLabel e1puf3u2",for:this.id},e),Object(b.createElement)("p",{className:"components-base-control__help css-1gbp77-StyledHelp e1puf3u3"},t),n)}}class E extends g.a.Component{createMarks(e,t,l,s){var r=Array(Math.floor((t-e)/l)+1);for(let t=0;t<r.length;t++)r[t]={value:e,label:s(e)},e+=l;return r}render(){let e=this.props.label,t=this.props.help,l=this.props.value,s=this.props.min,r=this.props.max,o=this.props.step||1,n=this.props.markStep||o,a=this.props.markRender||(e=>String(e)),i=this.props.disabled,c=this.props.tooltipRender||a,p=this.props.callback;return Object(b.createElement)(x.RangeControl,{label:e,help:t,value:l,min:s,max:r,step:o,marks:this.createMarks(s,r,n,a),renderTooltipContent:c,disabled:i,onChange:p})}}g.a.Component;class S extends g.a.Component{validateNumber(e){return!Boolean(e)||S.reg.test(e)}render(){let e=this.validateNumber(this.props.value);return Object(b.createElement)(x.TextControl,{value:this.props.value,onChange:e=>{this.props.onChange(e)},label:"Phone",help:e?null:"Unrecognized phone number format (perhaps you've made a typo?)"})}}y()(S,"reg",/^(\+?[0-9]{1,4})?[ \-.]*[0-9]{3}[ \-.]*[0-9]{3}[ \-.]*[0-9]{4}$/);class _ extends g.a.Component{validateEmail(e){return!Boolean(e)||_.reg.test(e)}render(){let e=this.validateEmail(this.props.value);return Object(b.createElement)(x.TextControl,{value:this.props.value,onChange:e=>{this.props.onChange(e),this.validateEmail(e)&&this.props.onChangeComplete(e)},label:"Email",help:e?null:"Invalid email address"})}}function w(e,t){return e&&t?"has-"+e+"-"+t:null}y()(_,"reg",/^(?:[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-zA-Z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/);class N extends g.a.Component{render(){let e=this.props.label,t=(this.props.allowGradients,this.props.value),l=this.props.onChange,s=Object(f.select)("core/block-editor").getSettings();return Object(b.createElement)(b.Fragment,null,Object(b.createElement)("p",null,e),Object(b.createElement)(x.ColorPalette,{colors:s.colors,disableCustomColors:s.disableCustomColors,value:t,onChange:e=>{let t=s.colors.filter(t=>t.color===e)[0];l({color:e,slug:t?t.slug:null})}}))}}function z(e){let t=Object(f.select)("core/block-editor").getSettings().colors;return function(e,t){let l=t.filter(t=>t.slug===e)[0];return l?l.color:null}(e.slug,t)}function A(){return(A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&(e[s]=l[s])}return e}).apply(this,arguments)}function P(e){return m.createElement("svg",A({id:"dismiss_svg__Layer_1","data-name":"Layer 1",xmlns:"http: //www.w3.org/2000/svg",viewBox:"0 0 43 95.17"},e),o||(o=m.createElement("defs",null,m.createElement("style",null,".dismiss_svg__cls-2,.dismiss_svg__cls-4{fill:none;stroke-width:3px;stroke-miterlimit:10}"))),n||(n=m.createElement("path",{className:"dismiss_svg__cls-1",d:"M21.5 42.5a21 21 0 1121-21 21 21 0 01-21 21",transform:"translate(0 52.67)"})),a||(a=m.createElement("path",{className:"dismiss_svg__cls-2",d:"M10.91 84.76l21.18-21.19M10.91 63.57l21.18 21.19"})),i||(i=m.createElement("path",{d:"M21.5-10.17a21 21 0 01-21-21 21 21 0 0121-21 21 21 0 0121 21 21 21 0 01-21 21m0-40a19 19 0 00-19 19 19 19 0 0019 19 19 19 0 0019-19 19 19 0 00-19-19z",transform:"translate(0 52.67)",strokeMiterlimit:10})),c||(c=m.createElement("path",{className:"dismiss_svg__cls-4",d:"M10.91 32.09l21.18-21.18M10.91 10.91l21.18 21.18"})))}const M=e=>e.ids||[],T=(e,t)=>{t=Number(t);let l=e.ids.length;if(t<0)return I(e);if(0===l)return-1;for(let s=0;s<l;s++)if(e.ids[s]===t)return I(e);return-1},I=e=>{for(let t=0;t<e.ids.length;t++){const l=e.ids[t];if(0===t&&0!==l)return l;if(t+1<e.ids.length&&e.ids[t+1]-1>l||t+1>=e.ids.length)return l+1}return 0};function R(e){return{type:"CREATE",id:e}}function B(e){return{type:"DELETE",id:e}}const L=e=>{let t=e.attributes,l="popup-"+String(t.id),s=t.bgColor.slug?null:t.bgColor.color,r=t.textColor.slug?null:t.textColor.color,o=`\n    #${l}:target {\n      display: block;\n    }\n  `;return Object(b.createElement)(b.Fragment,null,e.backend?Object(b.createElement)("a",{className:"ncs4-popup-button "+(e.className||"")+" "+(t.linkStyle||""),href:"#"},t.buttonTitle):Object(b.createElement)("a",{className:"ncs4-popup-button "+(e.className||"")+" "+(t.linkStyle||""),href:"#"+l},t.buttonTitle),Object(b.createElement)("div",{id:l,className:"ncs4-popup__wrapper",style:{textAlign:"left"}},Object(b.createElement)("a",{className:"ncs4-popup-overlay",href:"#!",style:{opacity:t.overlayOpacity}}),Object(b.createElement)("div",{className:"ncs4-popup-content__wrapper"},Object(b.createElement)("div",{className:["ncs4-popup-content",w(t.bgColor.slug,"background-color"),w(t.textColor.slug,"color"),t.optionSize].join(" "),style:{backgroundColor:s,"--palette-bg-color":s,color:r,"--palette-color":r}},e.children)),Object(b.createElement)("style",null,o)))};L.classType="ncs4-custom-blocks_popup-type",L.sizeOptions=[{value:"size-alert",label:"Alert"},{value:"size-small",label:"Small"},{value:"size-body",label:"Medium (body size)"},{value:"size-large",label:"Large"}],L.linkOptions=[{value:"",label:"Link"},{value:"ncs4-button ncs4-button__blue",label:"Blue button"},{value:"ncs4-button ncs4-button__yellow",label:"Yellow button"},{value:"ncs4-button ncs4-button__gold",label:"Gold button"}],L.Dismiss=e=>Object(b.createElement)("a",{href:"#!",className:"ncs4-award-card__popup-dismiss-link",title:"Dismiss"},Object(b.createElement)(P,{className:"ncs4-award-card__popup-dismiss",viewBox:"0 52.67 43 43"})),L.Settings=e=>{let t=e.attributes,l=e.callback;return Object(b.createElement)(b.Fragment,null,Object(b.createElement)(x.PanelBody,{title:"Button settings",initialOpen:!0},Object(b.createElement)(x.TextControl,{label:"Button title",placeholder:"Show",value:t.buttonTitle,onChange:e=>{l({buttonTitle:e})}})),Object(b.createElement)(x.PanelBody,{title:"Popup area settings",initialOpen:!0},Object(b.createElement)(N,{label:"Popup background",value:t.bgColor.color,onChange:e=>{l({bgColor:e})}}),Object(b.createElement)(N,{label:"Popup text",value:t.textColor.color,onChange:e=>{l({textColor:e})}}),Object(b.createElement)(O,{options:[{attribute:"overlayOpacity",label:"Overlay opacity",value:Math.round(100*t.overlayOpacity),min:0,max:100,step:1,markStep:20,markRender:e=>String(e)+"%",onChange:e=>e/100},{attribute:"optionSize",label:"Content size",value:t.optionSize,choices:L.sizeOptions}],onChange:e=>{l(e)}})))};var F=L;Object(f.registerStore)("ncs4/popup",{selectors:s,actions:r,reducer:(e={ids:[]},{id:t,type:l})=>{switch(t=Number(t),l){case"CREATE":let l=[],s=0,r=!1;for(let o=0;o<e.ids.length;o++)!r&&e.ids[o]>t&&(l[s]=t,r=!0,s++),l[s]=e.ids[o],s++;return r||(l[l.length]=t),{...e,ids:l};case"DELETE":return{...e,ids:e.ids.filter(e=>e!==t)};default:return e}}});class D extends g.a.Component{constructor(e){super(e),this.attributes=e.attributes,this.clientId=e.clientId,this.setAttributes=e.setAttributes,this.setStateAttributes=this.setStateAttributes.bind(this),this.handleSelected=this.handleSelected.bind(this),this.state={showModal:!1,overlayOpacity:this.attributes.overlayOpacity,bgColor:this.attributes.bgColor,textColor:this.attributes.textColor,buttonTitle:this.attributes.buttonTitle,id:this.attributes.id,optionSize:this.attributes.optionSize,linkStyle:this.attributes.linkStyle},this.state.optionSize||this.setStateAttributes({optionSize:sizeOptions.default()}),wp.data.subscribe(this.handleSelected)}componentDidMount(){!function(e,t=-1){let l=Object(f.select)("ncs4/popup"),{createId:s,deleteId:r}=Object(f.dispatch)("ncs4/popup"),o=l.requestId(t);-1!==o?(e(o),s(o)):(e(t),s(t))}(e=>this.setStateAttributes({id:e}),this.state.id),this.setStateAttributes({bgColor:{color:z(this.state.bgColor),slug:this.state.bgColor.slug}}),this.setStateAttributes({textColor:{color:z(this.state.textColor),slug:this.state.textColor.slug}})}componentWillUnmount(){!function(e){let{deleteId:t}=Object(f.dispatch)("ncs4/popup");t(e)}(this.state.id)}createClassName(e){return["ncs4-popup",F.classType,this.state.showModal?"is-selected":null].join(" ")+" "+e}setStateAttributes(e){this.setState(e,()=>{this.setAttributes(e)})}handleSelected(){let e=Object(f.select)("core/block-editor").getSelectedBlock();e&&(this.state.showModal||e.clientId!==this.clientId?this.state.showModal&&e.clientId!==this.clientId&&this.setState({showModal:!1}):this.setState({showModal:!0}))}render(){return Object(b.createElement)("div",u()({},this.props.blockProps,{className:this.createClassName(this.props.blockProps.className)}),Object(b.createElement)(F,{attributes:this.state},Object(b.createElement)(h.InnerBlocks,null)),Object(b.createElement)(h.InspectorControls,null,Object(b.createElement)(F.Settings,{attributes:this.state,callback:this.setStateAttributes}),Object(b.createElement)(x.PanelBody,{title:"Link settings",initialOpen:!0},Object(b.createElement)(O,{options:[{attribute:"linkStyle",label:"Link style",default:"",value:this.state.linkStyle,choices:F.linkOptions}],onChange:this.setStateAttributes}))))}}class $ extends g.a.Component{constructor(e){super(e),this.visible=e.visible||e.attributes.showOnLoad||!1}createClassName(e){return["ncs4-popup",F.classType].join(" ")+" "+e}render(){return Object(b.createElement)("div",u()({},this.props.blockProps,{className:this.createClassName(this.props.blockProps.className)}),Object(b.createElement)(F,{attributes:this.props.attributes},Object(b.createElement)(h.InnerBlocks.Content,null)))}}Object(d.registerBlockType)("ncs4-custom-blocks/popup",{apiVersion:2,title:"Popup",icon:"testimonial",category:"layout",attributes:{overlayOpacity:{type:"number",default:.9},bgColor:{type:"object",default:{color:null,slug:"white-bright"}},textColor:{type:"object",default:{color:null,slug:"secondary-1c"}},buttonTitle:{type:"string",default:"Show"},id:{type:"number"},optionSize:{type:"string",default:"size-body"},linkStyle:{type:"string",default:""}},edit:e=>Object(b.createElement)(D,u()({},e,{blockProps:Object(h.useBlockProps)()})),save:e=>Object(b.createElement)($,u()({},e,{blockProps:h.useBlockProps.save()}))})}]);